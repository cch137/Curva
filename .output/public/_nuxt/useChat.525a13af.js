import{b as W,aW as U,j as v,l as G,m as j,o as q,c as K,y as Q,a5 as X,v as $,u as V,z as Z,H as J,K as Y,r as h,bI as tt,w as E,ay as et,L as nt,ax as y,bE as st,bF as ot}from"./entry.1a7c00d3.js";import{a as rt}from"./el-button.d5ba3d02.js";const ct=W({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:U,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),at=v({name:"ElText"}),it=v({...at,props:ct,setup(t){const n=t,e=rt(),c=G("text"),s=j(()=>[c.b(),c.m(n.type),c.m(e.value),c.is("truncated",n.truncated)]);return(o,a)=>(q(),K(Z(o.tag),{class:$(V(s))},{default:Q(()=>[X(o.$slots,"default")]),_:3},8,["class"]))}});var lt=J(it,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const bt=Y(lt);function ut(){setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)})}const C="web-browsing",_="temperature-suffix",b=t=>(t==null?void 0:t.toString)===void 0?"":t.toString(),pt=t=>b(t).toLowerCase(),I="01",k="0123456789",H="0123456789abcdef",R="0123456789abcdefghijklmnopqrstuvwxyz",D="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",w=t=>{switch(typeof t!="string"&&(t=pt(t)),t){case"2":return I;case"10":return k;case"16":return H;case"36":return R;case"62":return D;case"64":return p;case"64w":case"64+":return M;default:return t}},ft=(t,n,e,c=0)=>{typeof t!="string"&&(t=b(t));let s=0;if(+n==10)s=+Number(t);else if(+n<37)s=parseInt(t,+n);else{n=w(n);const a=n.length;for(let i=0;i<t.length;i++)s+=n.indexOf(t[i])*Math.pow(a,t.length-1-i)}let o="";if(+e<37&&(o=s.toString(+e),c<=1))return o;if(e=w(e),o===""){const a=e.length;for(;s>0;)o=e.charAt(s%a)+o,s=Math.floor(s/a)}return(o===""?e.charAt(0):o).padStart(c,e[0])},ht=t=>{const n=t.split("").map(o=>o.charCodeAt(0)),e=[];let c=0;for(;c<n.length;){const[o,a=0,i=0]=n.slice(c,c+=3),r=(o<<16)+(a<<8)+i,l=r>>18,d=r>>12&63,f=r>>6&63,L=r&63;e.push(p[l],p[d],p[f],p[L])}const s=n.length%3;return e.join("").slice(0,1+e.length-s)+(s===2?"==":s===1?"=":"")},dt=/[^A-Za-z0-9+/]/g,z=t=>t.replace(dt,""),g=t=>String.fromCharCode(+t),gt=t=>{const n=z(t).split(""),e=[];let c=0;for(;c<n.length;){const[s,o,a,i]=n.slice(c,c+=4).map(r=>p.indexOf(r));e.push(g(s<<2|o>>4)),a!==64&&e.push(g((o&15)<<4|a>>2)),i!==64&&e.push(g((a&3)<<6|i))}return e.join("").replaceAll("\0","")},mt={BASE2_CHARSET:I,BASE10_CHARSET:k,BASE16_CHARSET:H,BASE36_CHARSET:R,BASE62_CHARSET:D,BASE64_CHARSET:p,BASE64WEB_CHARSET:M,convert:ft,getCharset:w,secureBase64:z,textToBase64:ht,base64ToText:gt},P=2048,u=[],F=()=>{for(;u.length>1&&u.slice(1,u.length).join("").length>P;)u.shift()},St=()=>{if(!O.value)return"";F();const t=[...u].reverse().join(`
---
`);return t.length===0?"":`Here are your replies, from newest to oldest:
${t}`.substring(0,P)},wt=(...t)=>{u.push(...t),F()},Tt=()=>{u.splice(0,u.length)},xt=["OFF","BASIC","ADVANCED"],At="BASIC",m=h(At),T=h([]),x=h([]),A={add:wt,get:St,clear:Tt},Et=h(""),Ct=()=>{document.querySelector(".InputBox textarea").focus()},N=()=>new Promise((t,n)=>{$fetch("/api/token/check",{method:"POST"}).then(e=>{const{list:c,named:s}=e;x.value=c.sort().map(o=>({id:o,name:s[o]})),t(!0)}).catch(e=>{y.error("Initialization Failed"),n(e)})}),_t=t=>new Promise((n,e)=>{const c=mt.convert(t,"64w",10);if(Et.value=c,t==null)return A.clear(),n(!0);$fetch("/api/history",{method:"POST",body:{id:t}}).then(s=>{const o=s;o.length===0&&ot("/c/");const a=[];A.add(...o.map(i=>{const{Q:r,A:l,t:d}=i,f=new Date(d);return a.push({type:"Q",text:r,t:f},{type:"A",text:l,t:f}),l})),T.value.unshift(...a),n(!0)}).catch(s=>{y.error("There was an error loading the conversation."),e(s)})}),B=(t,n=!1)=>{if(!n){const e=st.service();Promise.all([t===null?null:N(),_t(t)]).finally(()=>{ut(),e!==null&&setTimeout(()=>{e.close()},500)})}},Bt="_t05",S=h(Bt),O=h(!0);function It(){const t=tt(),n=t.get(C);xt.includes(n)&&(m.value=n);const e=t.get(_)||"";/_t(?:0[0-9]|10)/.test(e)&&(S.value=e),E(m,r=>{typeof r=="string"&&t.set(C,r,{path:"/"})}),E(S,r=>{t.set(_,r,{path:"/"})});const c=et(),s=()=>{var r,l;return(l=(r=c._route)==null?void 0:r.params)==null?void 0:l.conv},o=()=>{const r=s();return x.value.filter(l=>l.id===r)[0].name||""},a=nt("openDrawer",()=>!1);return{conversations:x,messages:T,context:A,webBrowsingMode:m,temperatureSuffix:S,contextMode:O,getCurrentConvId:s,getCurrentConvName:o,checkTokenAndGetConversations:N,initPage:B,goToChat:(r,l=!1,d=!1)=>{const f=s();(l||f!==r||r===null)&&(T.value=[],B(r,d)),a.value=!1,Ct()}}}export{bt as E,ut as a,mt as b,b as s,It as u};
