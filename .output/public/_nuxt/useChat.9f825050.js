import{b as W,aQ as Q,j as b,l as U,m as $,o as q,c as G,y as j,a6 as K,v as X,u as V,z as Z,H as J,K as Y,r as p,bL as ee,w as g,az as te,ay as M,bp as ne,bq as se}from"./entry.13bc3a02.js";import{a as oe}from"./el-button.5e81bdb5.js";const re=W({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Q,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),ce=b({name:"ElText"}),ae=b({...ce,props:re,setup(e){const n=e,t=oe(),c=U("text"),o=$(()=>[c.b(),c.m(n.type),c.m(t.value),c.is("truncated",n.truncated)]);return(r,a)=>(q(),G(Z(r.tag),{class:X(V(o))},{default:j(()=>[K(r.$slots,"default")]),_:3},8,["class"]))}});var ie=J(ae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const ke=Y(ie);async function ue(){return await new Promise((e,n)=>{setTimeout(()=>{try{window.scrollTo(0,document.body.scrollHeight),e(null)}catch(t){n(t)}})})}const le={get isMobileScreen(){return window.innerWidth<600},get isTouchScreen(){return"ontouchstart"in document||navigator.maxTouchPoints>0}};function pe(){return le}const _="web-browsing",y="temperature-suffix",k=e=>(e==null?void 0:e.toString)===void 0?"":e.toString(),fe=e=>k(e).toLowerCase(),H="01",I="0123456789",P="0123456789abcdef",R="0123456789abcdefghijklmnopqrstuvwxyz",z="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",A=e=>{switch(typeof e!="string"&&(e=fe(e)),e){case"2":return H;case"10":return I;case"16":return P;case"36":return R;case"62":return z;case"64":return h;case"64w":case"64+":return D;default:return e}},he=(e,n,t,c=0)=>{typeof e!="string"&&(e=k(e));let o=0;if(+n==10)o=+Number(e);else if(+n<37)o=parseInt(e,+n);else{n=A(n);const a=n.length;for(let i=0;i<e.length;i++)o+=n.indexOf(e[i])*Math.pow(a,e.length-1-i)}let r="";if(+t<37&&(r=o.toString(+t),c<=1))return r;if(t=A(t),r===""){const a=t.length;for(;o>0;)r=t.charAt(o%a)+r,o=Math.floor(o/a)}return(r===""?t.charAt(0):r).padStart(c,t[0])},de=e=>{const n=e.split("").map(r=>r.charCodeAt(0)),t=[];let c=0;for(;c<n.length;){const[r,a=0,i=0]=n.slice(c,c+=3),u=(r<<16)+(a<<8)+i,s=u>>18,l=u>>12&63,d=u>>6&63,w=u&63;t.push(h[s],h[l],h[d],h[w])}const o=n.length%3;return t.join("").slice(0,1+t.length-o)+(o===2?"==":o===1?"=":"")},ge=/[^A-Za-z0-9+/]/g,F=e=>e.replace(ge,""),T=e=>String.fromCharCode(+e),me=e=>{const n=F(e).split(""),t=[];let c=0;for(;c<n.length;){const[o,r,a,i]=n.slice(c,c+=4).map(u=>h.indexOf(u));t.push(T(o<<2|r>>4)),a!==64&&t.push(T((r&15)<<4|a>>2)),i!==64&&t.push(T((a&3)<<6|i))}return t.join("").replaceAll("\0","")},Se={BASE2_CHARSET:H,BASE10_CHARSET:I,BASE16_CHARSET:P,BASE36_CHARSET:R,BASE62_CHARSET:z,BASE64_CHARSET:h,BASE64WEB_CHARSET:D,convert:he,getCharset:A,secureBase64:F,textToBase64:de,base64ToText:me},we=2048,f=[],O=()=>{for(;f.length>1&&f.slice(1,f.length).join("").length>we;)f.shift()},Te=()=>{if(!L.value)return"";O();const e=f.join(`
---
`);return e.length===0?"":`Conversation history
===
${e}`},xe=(e="",n="",t=!0)=>{f.push(`Question: ${e}
Answer: ${n}`),t&&O()},ve=()=>{f.splice(0,f.length)},Ae=["OFF","BASIC","ADVANCED"],Ee="OFF",x=p(Ee),E=p([]),C=p([]),S={add:xe,get:Te,clear:ve},Ce=p(""),_e=()=>{document.querySelector(".InputBox textarea").focus()},N=()=>new Promise((e,n)=>{$fetch("/api/token/check",{method:"POST"}).then(t=>{const{list:c,named:o}=t;C.value=c.sort().map(r=>({id:r,name:o[r]})),e(!0)}).catch(t=>{M.error("Initialization Failed"),n(t)})}),ye=e=>new Promise((n,t)=>{const c=Se.convert(e,"64w",10);if(Ce.value=c,e==null)return S.clear(),n(!0);$fetch("/api/history",{method:"POST",body:{id:e}}).then(o=>{const r=o;r.length===0&&se("/c/");const a=[];for(const i of r){const{Q:u,A:s,t:l}=i,d=new Date(l);a.push({type:"Q",text:u,t:d},{type:"A",text:s,t:d}),S.add(u,s,!1)}E.value.unshift(...a),n(!0)}).catch(o=>{M.error("There was an error loading the conversation."),t(o)})}),B=(e,n=!1)=>{if(!n){S.clear();const t=ne.service();Promise.all([e===null?null:N(),ye(e)]).finally(()=>{ue(),t!==null&&setTimeout(()=>{t.close()},500)})}},Be="_t05",v=p(Be),L=p(!0),m=p(!1);function He(){const e=ee(),n=e.get(_);Ae.includes(n)&&(x.value=n);const t=e.get(y)||"";/_t(?:0[0-9]|10)/.test(t)&&(v.value=t),g(x,s=>{typeof s=="string"&&e.set(_,s,{path:"/"})}),g(v,s=>{e.set(y,s,{path:"/"})});const c=te(),o=()=>{var s,l;return(l=(s=c._route)==null?void 0:s.params)==null?void 0:l.conv},r=()=>{const s=o();return C.value.filter(l=>l.id===s)[0].name||""},a=p(!0),i=p(!0);return g(m,s=>{pe().isMobileScreen?(a.value=!1,i.value!==s&&(i.value=s)):(i.value=!1,a.value!==s&&(a.value=s))}),g(i,s=>{m.value=s}),g(a,s=>{m.value=s}),m.value=!0,{conversations:C,messages:E,context:S,webBrowsingMode:x,temperatureSuffix:v,contextMode:L,openMenu:m,openSidebar:a,openDrawer:i,getCurrentConvId:o,getCurrentConvName:r,checkTokenAndGetConversations:N,initPage:B,goToChat:(s,l=!1,d=!1)=>{const w=o();(l||w!==s||s===null)&&(E.value=[],B(s,d)),a.value=!1,_e()}}}export{ke as E,ue as a,Se as b,k as s,He as u};
