var on=Object.defineProperty;var rn=(e,t,o)=>t in e?on(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var me=(e,t,o)=>(rn(e,typeof t!="symbol"?t+"":t,o),o);import{q as gt,a9 as sn,aN as yt,p as Je,N as an,l as Xe,bE as ln,aX as bt,bF as et,w as K,bG as un,at as cn,bH as fn,as as dn,bp as Ie,I as fe,az as vn,b as wt,a as tt,j as xe,C as G,P as Ae,ar as hn,aM as pn,m as Z,o as W,c as Y,y as V,v as H,u as mn,z as de,H as Et,K as gn,E as yn,bI as bn,bJ as wn,r as $,aq as St,bK as nt,aP as ot,ak as En,av as re,ah as Oe,t as X,F as rt,G as ge,s as He,A as se,B as le,x as ye,O as Le,aw as $e,ao as Sn,f as Ct,bL as Bt,bM as Tt,ap as st,ae as Cn,ac as Bn,ax as at,bu as it,bN as Tn,aC as At,b7 as An,M as _n,aB as ve,bh as Mn,bO as _t}from"./entry.eb2896bf.js";import{a as xn,E as kn}from"./el-button.cdcb4240.js";import{t as Rn,b as In,E as On}from"./el-input.b49bcf67.js";import{a as Hn,i as Ln}from"./el-tag.2c4565fb.js";const $n='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Dn=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,lt=e=>Array.from(e.querySelectorAll($n)).filter(t=>zn(t)&&Dn(t)),zn=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}};var Se=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(Se||{});const Nn=(e,t,o)=>{let r={offsetX:0,offsetY:0};const a=w=>{const _=w.clientX,n=w.clientY,{offsetX:m,offsetY:C}=r,b=e.value.getBoundingClientRect(),M=b.left,T=b.top,g=b.width,v=b.height,B=document.documentElement.clientWidth,s=document.documentElement.clientHeight,d=-M+m,h=-T+C,y=B-M-g+m,E=s-T-v+C,S=A=>{const x=Math.min(Math.max(m+A.clientX-_,d),y),R=Math.min(Math.max(C+A.clientY-n,h),E);r={offsetX:x,offsetY:R},e.value.style.transform=`translate(${Je(x)}, ${Je(R)})`},k=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",k)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",k)},i=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",a)},p=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",a)};gt(()=>{sn(()=>{o.value?i():p()})}),yt(()=>{p()})},Wn=(e,t={})=>{an(e)||Rn("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||Xe("popup"),r=ln(()=>o.bm("parent","hidden"));if(!bt||et(document.body,r.value))return;let a=0,i=!1,p="0";const w=()=>{setTimeout(()=>{dn(document==null?void 0:document.body,r.value),i&&document&&(document.body.style.width=p)},200)};K(e,_=>{if(!_){w();return}i=!et(document.body,r.value),i&&(p=document.body.style.width),a=In(o.namespace.value);const n=document.documentElement.clientHeight<document.body.scrollHeight,m=un(document.body,"overflowY");a>0&&(n||m==="scroll")&&i&&(document.body.style.width=`calc(100% - ${a}px)`),cn(document.body,r.value)}),fn(()=>w())},Mt=e=>{if(!e)return{onClick:Ie,onMousedown:Ie,onMouseup:Ie};let t=!1,o=!1;return{onClick:p=>{t&&o&&e(p),t=o=!1},onMousedown:p=>{t=p.target===p.currentTarget},onMouseup:p=>{o=p.target===p.currentTarget}}};var ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Pn(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var o=function r(){if(this instanceof r){var a=[null];a.push.apply(a,arguments);var i=Function.bind.apply(t,a);return new i}return t.apply(this,arguments)};o.prototype=t.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(o,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),o}const qe="_trap-focus-children",te=[],ut=e=>{if(te.length===0)return;const t=te[te.length-1][qe];if(t.length>0&&e.code===vn.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const o=e.shiftKey,r=e.target===t[0],a=e.target===t[t.length-1];r&&o&&(e.preventDefault(),t[t.length-1].focus()),a&&!o&&(e.preventDefault(),t[0].focus())}},Vn={beforeMount(e){e[qe]=lt(e),te.push(e),te.length<=1&&document.addEventListener("keydown",ut)},updated(e){fe(()=>{e[qe]=lt(e)})},unmounted(){te.shift(),te.length===0&&document.removeEventListener("keydown",ut)}},qn=wt({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:tt([String,Array,Object])},zIndex:{type:tt([String,Number])}}),Un={click:e=>e instanceof MouseEvent},jn="overlay";var Xn=xe({name:"ElOverlay",props:qn,emits:Un,setup(e,{slots:t,emit:o}){const r=Xe(jn),a=_=>{o("click",_)},{onClick:i,onMousedown:p,onMouseup:w}=Mt(e.customMaskEvent?void 0:a);return()=>e.mask?G("div",{class:[r.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:i,onMousedown:p,onMouseup:w},[Ae(t,"default")],Se.STYLE|Se.CLASS|Se.PROPS,["onClick","onMouseup","onMousedown"]):hn("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Ae(t,"default")])}});const Yn=Xn,Fn=wt({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:pn,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),Gn=xe({name:"ElText"}),Kn=xe({...Gn,props:Fn,setup(e){const t=e,o=xn(),r=Xe("text"),a=Z(()=>[r.b(),r.m(t.type),r.m(o.value),r.is("truncated",t.truncated)]);return(i,p)=>(W(),Y(de(i.tag),{class:H(mn(a))},{default:V(()=>[Ae(i.$slots,"default")]),_:3},8,["class"]))}});var Qn=Et(Kn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const dr=gn(Qn),Zn=xe({name:"ElMessageBox",directives:{TrapFocus:Vn},components:{ElButton:kn,ElFocusTrap:Hn,ElInput:On,ElOverlay:Yn,ElIcon:yn,...bn},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Ln},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{locale:o,zIndex:r,ns:a,size:i}=wn("message-box",Z(()=>e.buttonSize)),{t:p}=o,{nextZIndex:w}=r,_=$(!1),n=St({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:w()}),m=Z(()=>{const I=n.type;return{[a.bm("icon",I)]:I&&nt[I]}}),C=ot(),b=ot(),M=Z(()=>n.icon||nt[n.type]||""),T=Z(()=>!!n.message),g=$(),v=$(),B=$(),s=$(),d=$(),h=Z(()=>n.confirmButtonClass);K(()=>n.inputValue,async I=>{await fe(),e.boxType==="prompt"&&I!==null&&R()},{immediate:!0}),K(()=>_.value,I=>{var D,N;I&&(e.boxType!=="prompt"&&(n.autofocus?B.value=(N=(D=d.value)==null?void 0:D.$el)!=null?N:g.value:B.value=g.value),n.zIndex=w()),e.boxType==="prompt"&&(I?fe().then(()=>{var z;s.value&&s.value.$el&&(n.autofocus?B.value=(z=O())!=null?z:g.value:B.value=g.value)}):(n.editorErrorMessage="",n.validateError=!1))});const y=Z(()=>e.draggable);Nn(g,v,y),gt(async()=>{await fe(),e.closeOnHashChange&&window.addEventListener("hashchange",E)}),yt(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",E)});function E(){_.value&&(_.value=!1,fe(()=>{n.action&&t("action",n.action)}))}const S=()=>{e.closeOnClickModal&&x(n.distinguishCancelAndClose?"close":"cancel")},k=Mt(S),A=I=>{if(n.inputType!=="textarea")return I.preventDefault(),x("confirm")},x=I=>{var D;e.boxType==="prompt"&&I==="confirm"&&!R()||(n.action=I,n.beforeClose?(D=n.beforeClose)==null||D.call(n,I,n,E):E())},R=()=>{if(e.boxType==="prompt"){const I=n.inputPattern;if(I&&!I.test(n.inputValue||""))return n.editorErrorMessage=n.inputErrorMessage||p("el.messagebox.error"),n.validateError=!0,!1;const D=n.inputValidator;if(typeof D=="function"){const N=D(n.inputValue);if(N===!1)return n.editorErrorMessage=n.inputErrorMessage||p("el.messagebox.error"),n.validateError=!0,!1;if(typeof N=="string")return n.editorErrorMessage=N,n.validateError=!0,!1}}return n.editorErrorMessage="",n.validateError=!1,!0},O=()=>{const I=s.value.$refs;return I.input||I.textarea},P=()=>{x("close")},q=()=>{e.closeOnPressEscape&&P()};return e.lockScroll&&Wn(_),{...En(n),ns:a,overlayEvent:k,visible:_,hasMessage:T,typeClass:m,contentId:C,inputId:b,btnSize:i,iconComponent:M,confirmButtonClasses:h,rootRef:g,focusStartRef:B,headerRef:v,inputRef:s,confirmRef:d,doClose:E,handleClose:P,onCloseRequested:q,handleWrapperClick:S,handleInputEnter:A,handleAction:x,t:p}}}),Jn=["aria-label","aria-describedby"],eo=["aria-label"],to=["id"];function no(e,t,o,r,a,i){const p=re("el-icon"),w=re("close"),_=re("el-input"),n=re("el-button"),m=re("el-focus-trap"),C=re("el-overlay");return W(),Y(Sn,{name:"fade-in-linear",onAfterLeave:t[11]||(t[11]=b=>e.$emit("vanish")),persisted:""},{default:V(()=>[Oe(G(C,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:V(()=>[X("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:H(`${e.ns.namespace.value}-overlay-message-box`),onClick:t[8]||(t[8]=(...b)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...b)),onMousedown:t[9]||(t[9]=(...b)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...b)),onMouseup:t[10]||(t[10]=(...b)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...b))},[G(m,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:V(()=>[X("div",{ref:"rootRef",class:H([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:rt(e.customStyle),tabindex:"-1",onClick:t[7]||(t[7]=ge(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(W(),He("div",{key:0,ref:"headerRef",class:H(e.ns.e("header"))},[X("div",{class:H(e.ns.e("title"))},[e.iconComponent&&e.center?(W(),Y(p,{key:0,class:H([e.ns.e("status"),e.typeClass])},{default:V(()=>[(W(),Y(de(e.iconComponent)))]),_:1},8,["class"])):se("v-if",!0),X("span",null,le(e.title),1)],2),e.showClose?(W(),He("button",{key:0,type:"button",class:H(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:t[0]||(t[0]=b=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:t[1]||(t[1]=ye(ge(b=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[G(p,{class:H(e.ns.e("close"))},{default:V(()=>[G(w)]),_:1},8,["class"])],42,eo)):se("v-if",!0)],2)):se("v-if",!0),X("div",{id:e.contentId,class:H(e.ns.e("content"))},[X("div",{class:H(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(W(),Y(p,{key:0,class:H([e.ns.e("status"),e.typeClass])},{default:V(()=>[(W(),Y(de(e.iconComponent)))]),_:1},8,["class"])):se("v-if",!0),e.hasMessage?(W(),He("div",{key:1,class:H(e.ns.e("message"))},[Ae(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(W(),Y(de(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(W(),Y(de(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:V(()=>[Le(le(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):se("v-if",!0)],2),Oe(X("div",{class:H(e.ns.e("input"))},[G(_,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=b=>e.inputValue=b),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:H({invalid:e.validateError}),onKeydown:ye(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),X("div",{class:H(e.ns.e("errormsg")),style:rt({visibility:e.editorErrorMessage?"visible":"hidden"})},le(e.editorErrorMessage),7)],2),[[$e,e.showInput]])],10,to),X("div",{class:H(e.ns.e("btns"))},[e.showCancelButton?(W(),Y(n,{key:0,loading:e.cancelButtonLoading,class:H([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:t[3]||(t[3]=b=>e.handleAction("cancel")),onKeydown:t[4]||(t[4]=ye(ge(b=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:V(()=>[Le(le(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):se("v-if",!0),Oe(G(n,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:H([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:t[5]||(t[5]=b=>e.handleAction("confirm")),onKeydown:t[6]||(t[6]=ye(ge(b=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:V(()=>[Le(le(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[$e,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,Jn)]),_:3},8,["z-index","overlay-class","mask"]),[[$e,e.visible]])]),_:3})}var oo=Et(Zn,[["render",no],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const he=new Map,ro=e=>{let t=document.body;return e.appendTo&&(Ct(e.appendTo)&&(t=document.querySelector(e.appendTo)),it(e.appendTo)&&(t=e.appendTo),it(t)||(t=document.body)),t},so=(e,t,o=null)=>{const r=G(oo,e,at(e.message)||Bt(e.message)?{default:at(e.message)?e.message:()=>e.message}:null);return r.appContext=o,Tt(r,t),ro(e).appendChild(t.firstElementChild),r.component},ao=()=>document.createElement("div"),io=(e,t)=>{const o=ao();e.onVanish=()=>{Tt(null,o),he.delete(a)},e.onAction=i=>{const p=he.get(a);let w;e.showInput?w={value:a.inputValue,action:i}:w=i,e.callback?e.callback(w,r.proxy):i==="cancel"||i==="close"?e.distinguishCancelAndClose&&i!=="cancel"?p.reject("close"):p.reject("cancel"):p.resolve(w)};const r=so(e,o,t),a=r.proxy;for(const i in e)st(e,i)&&!st(a.$props,i)&&(a[i]=e[i]);return a.visible=!0,a};function ie(e,t=null){if(!bt)return Promise.reject();let o;return Ct(e)||Bt(e)?e={message:e}:o=e.callback,new Promise((r,a)=>{const i=io(e,t??ie._context);he.set(i,{options:e,callback:o,resolve:r,reject:a})})}const lo=["alert","confirm","prompt"],uo={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};lo.forEach(e=>{ie[e]=co(e)});function co(e){return(t,o,r,a)=>{let i="";return Cn(o)?(r=o,i=""):Bn(o)?i="":i=o,ie(Object.assign({title:i,message:t,type:"",...uo[e]},r,{boxType:e}),a)}}ie.close=()=>{he.forEach((e,t)=>{t.doClose()}),he.clear()};ie._context=null;const F=ie;F.install=e=>{F._context=e._context,e.config.globalProperties.$msgbox=F,e.config.globalProperties.$messageBox=F,e.config.globalProperties.$alert=F.alert,e.config.globalProperties.$confirm=F.confirm,e.config.globalProperties.$prompt=F.prompt};const fo=F,vo={},ho=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),po=Pn(ho);async function kt(){return await new Promise((e,t)=>{setTimeout(()=>{try{window.scrollTo(0,document.body.scrollHeight),e(null)}catch(o){t(o)}})})}const mo={get isMobileScreen(){return window.innerWidth<600},get isTouchScreen(){return"ontouchstart"in document||navigator.maxTouchPoints>0}};function ct(){return mo}const ft="web-browsing",dt="temperature-suffix",ke=e=>(e==null?void 0:e.toString)===void 0?"":e.toString(),go=e=>ke(e).toLowerCase(),Rt="01",It="0123456789",Ot="0123456789abcdef",Ht="0123456789abcdefghijklmnopqrstuvwxyz",Lt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Ue=e=>{switch(typeof e!="string"&&(e=go(e)),e){case"2":return Rt;case"10":return It;case"16":return Ot;case"36":return Ht;case"62":return Lt;case"64":return ne;case"64w":case"64+":return $t;default:return e}},yo=(e,t,o,r=0)=>{typeof e!="string"&&(e=ke(e));let a=0;if(+t==10)a=+Number(e);else if(+t<37)a=parseInt(e,+t);else{t=Ue(t);const p=t.length;for(let w=0;w<e.length;w++)a+=t.indexOf(e[w])*Math.pow(p,e.length-1-w)}let i="";if(+o<37&&(i=a.toString(+o),r<=1))return i;if(o=Ue(o),i===""){const p=o.length;for(;a>0;)i=o.charAt(a%p)+i,a=Math.floor(a/p)}return(i===""?o.charAt(0):i).padStart(r,o[0])},bo=e=>{const t=e.split("").map(i=>i.charCodeAt(0)),o=[];let r=0;for(;r<t.length;){const[i,p=0,w=0]=t.slice(r,r+=3),_=(i<<16)+(p<<8)+w,n=_>>18,m=_>>12&63,C=_>>6&63,b=_&63;o.push(ne[n],ne[m],ne[C],ne[b])}const a=t.length%3;return o.join("").slice(0,1+o.length-a)+(a===2?"==":a===1?"=":"")},wo=/[^A-Za-z0-9+/]/g,Dt=e=>e.replace(wo,""),De=e=>String.fromCharCode(+e),Eo=e=>{const t=Dt(e).split(""),o=[];let r=0;for(;r<t.length;){const[a,i,p,w]=t.slice(r,r+=4).map(_=>ne.indexOf(_));o.push(De(a<<2|i>>4)),p!==64&&o.push(De((i&15)<<4|p>>2)),w!==64&&o.push(De((p&3)<<6|w))}return o.join("").replaceAll("\0","")},Re={BASE2_CHARSET:Rt,BASE10_CHARSET:It,BASE16_CHARSET:Ot,BASE36_CHARSET:Ht,BASE62_CHARSET:Lt,BASE64_CHARSET:ne,BASE64WEB_CHARSET:$t,convert:yo,getCharset:Ue,secureBase64:Dt,textToBase64:bo,base64ToText:Eo};var zt={exports:{}};function So(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ze={exports:{}},vt;function Ye(){return vt||(vt=1,function(e,t){(function(o,r){e.exports=r()})(ee,function(){var o=o||function(r,a){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof ee<"u"&&ee.crypto&&(i=ee.crypto),!i&&typeof So=="function")try{i=po}catch{}var p=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},w=Object.create||function(){function s(){}return function(d){var h;return s.prototype=d,h=new s,s.prototype=null,h}}(),_={},n=_.lib={},m=n.Base=function(){return{extend:function(s){var d=w(this);return s&&d.mixIn(s),(!d.hasOwnProperty("init")||this.init===d.init)&&(d.init=function(){d.$super.init.apply(this,arguments)}),d.init.prototype=d,d.$super=this,d},create:function(){var s=this.extend();return s.init.apply(s,arguments),s},init:function(){},mixIn:function(s){for(var d in s)s.hasOwnProperty(d)&&(this[d]=s[d]);s.hasOwnProperty("toString")&&(this.toString=s.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),C=n.WordArray=m.extend({init:function(s,d){s=this.words=s||[],d!=a?this.sigBytes=d:this.sigBytes=s.length*4},toString:function(s){return(s||M).stringify(this)},concat:function(s){var d=this.words,h=s.words,y=this.sigBytes,E=s.sigBytes;if(this.clamp(),y%4)for(var S=0;S<E;S++){var k=h[S>>>2]>>>24-S%4*8&255;d[y+S>>>2]|=k<<24-(y+S)%4*8}else for(var A=0;A<E;A+=4)d[y+A>>>2]=h[A>>>2];return this.sigBytes+=E,this},clamp:function(){var s=this.words,d=this.sigBytes;s[d>>>2]&=4294967295<<32-d%4*8,s.length=r.ceil(d/4)},clone:function(){var s=m.clone.call(this);return s.words=this.words.slice(0),s},random:function(s){for(var d=[],h=0;h<s;h+=4)d.push(p());return new C.init(d,s)}}),b=_.enc={},M=b.Hex={stringify:function(s){for(var d=s.words,h=s.sigBytes,y=[],E=0;E<h;E++){var S=d[E>>>2]>>>24-E%4*8&255;y.push((S>>>4).toString(16)),y.push((S&15).toString(16))}return y.join("")},parse:function(s){for(var d=s.length,h=[],y=0;y<d;y+=2)h[y>>>3]|=parseInt(s.substr(y,2),16)<<24-y%8*4;return new C.init(h,d/2)}},T=b.Latin1={stringify:function(s){for(var d=s.words,h=s.sigBytes,y=[],E=0;E<h;E++){var S=d[E>>>2]>>>24-E%4*8&255;y.push(String.fromCharCode(S))}return y.join("")},parse:function(s){for(var d=s.length,h=[],y=0;y<d;y++)h[y>>>2]|=(s.charCodeAt(y)&255)<<24-y%4*8;return new C.init(h,d)}},g=b.Utf8={stringify:function(s){try{return decodeURIComponent(escape(T.stringify(s)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(s){return T.parse(unescape(encodeURIComponent(s)))}},v=n.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new C.init,this._nDataBytes=0},_append:function(s){typeof s=="string"&&(s=g.parse(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes},_process:function(s){var d,h=this._data,y=h.words,E=h.sigBytes,S=this.blockSize,k=S*4,A=E/k;s?A=r.ceil(A):A=r.max((A|0)-this._minBufferSize,0);var x=A*S,R=r.min(x*4,E);if(x){for(var O=0;O<x;O+=S)this._doProcessBlock(y,O);d=y.splice(0,x),h.sigBytes-=R}return new C.init(d,R)},clone:function(){var s=m.clone.call(this);return s._data=this._data.clone(),s},_minBufferSize:0});n.Hasher=v.extend({cfg:m.extend(),init:function(s){this.cfg=this.cfg.extend(s),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(s){return this._append(s),this._process(),this},finalize:function(s){s&&this._append(s);var d=this._doFinalize();return d},blockSize:16,_createHelper:function(s){return function(d,h){return new s.init(h).finalize(d)}},_createHmacHelper:function(s){return function(d,h){return new B.HMAC.init(s,h).finalize(d)}}});var B=_.algo={};return _}(Math);return o})}(ze)),ze.exports}var Ne={exports:{}},ht;function Co(){return ht||(ht=1,function(e,t){(function(o,r){e.exports=r(Ye())})(ee,function(o){return function(r){var a=o,i=a.lib,p=i.Base,w=i.WordArray,_=a.x64={};_.Word=p.extend({init:function(n,m){this.high=n,this.low=m}}),_.WordArray=p.extend({init:function(n,m){n=this.words=n||[],m!=r?this.sigBytes=m:this.sigBytes=n.length*8},toX32:function(){for(var n=this.words,m=n.length,C=[],b=0;b<m;b++){var M=n[b];C.push(M.high),C.push(M.low)}return w.create(C,this.sigBytes)},clone:function(){for(var n=p.clone.call(this),m=n.words=this.words.slice(0),C=m.length,b=0;b<C;b++)m[b]=m[b].clone();return n}})}(),o})}(Ne)),Ne.exports}(function(e,t){(function(o,r,a){e.exports=r(Ye(),Co())})(ee,function(o){return function(r){var a=o,i=a.lib,p=i.WordArray,w=i.Hasher,_=a.x64,n=_.Word,m=a.algo,C=[],b=[],M=[];(function(){for(var v=1,B=0,s=0;s<24;s++){C[v+5*B]=(s+1)*(s+2)/2%64;var d=B%5,h=(2*v+3*B)%5;v=d,B=h}for(var v=0;v<5;v++)for(var B=0;B<5;B++)b[v+5*B]=B+(2*v+3*B)%5*5;for(var y=1,E=0;E<24;E++){for(var S=0,k=0,A=0;A<7;A++){if(y&1){var x=(1<<A)-1;x<32?k^=1<<x:S^=1<<x-32}y&128?y=y<<1^113:y<<=1}M[E]=n.create(S,k)}})();var T=[];(function(){for(var v=0;v<25;v++)T[v]=n.create()})();var g=m.SHA3=w.extend({cfg:w.cfg.extend({outputLength:512}),_doReset:function(){for(var v=this._state=[],B=0;B<25;B++)v[B]=new n.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(v,B){for(var s=this._state,d=this.blockSize/2,h=0;h<d;h++){var y=v[B+2*h],E=v[B+2*h+1];y=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360;var S=s[h];S.high^=E,S.low^=y}for(var k=0;k<24;k++){for(var A=0;A<5;A++){for(var x=0,R=0,O=0;O<5;O++){var S=s[A+5*O];x^=S.high,R^=S.low}var P=T[A];P.high=x,P.low=R}for(var A=0;A<5;A++)for(var q=T[(A+4)%5],I=T[(A+1)%5],D=I.high,N=I.low,x=q.high^(D<<1|N>>>31),R=q.low^(N<<1|D>>>31),O=0;O<5;O++){var S=s[A+5*O];S.high^=x,S.low^=R}for(var z=1;z<25;z++){var x,R,S=s[z],U=S.high,j=S.low,l=C[z];l<32?(x=U<<l|j>>>32-l,R=j<<l|U>>>32-l):(x=j<<l-32|U>>>64-l,R=U<<l-32|j>>>64-l);var u=T[b[z]];u.high=x,u.low=R}var c=T[0],f=s[0];c.high=f.high,c.low=f.low;for(var A=0;A<5;A++)for(var O=0;O<5;O++){var z=A+5*O,S=s[z],Ge=T[z],Ke=T[(A+1)%5+5*O],Qe=T[(A+2)%5+5*O];S.high=Ge.high^~Ke.high&Qe.high,S.low=Ge.low^~Ke.low&Qe.low}var S=s[0],Ze=M[k];S.high^=Ze.high,S.low^=Ze.low}},_doFinalize:function(){var v=this._data,B=v.words;this._nDataBytes*8;var s=v.sigBytes*8,d=this.blockSize*32;B[s>>>5]|=1<<24-s%32,B[(r.ceil((s+1)/d)*d>>>5)-1]|=128,v.sigBytes=B.length*4,this._process();for(var h=this._state,y=this.cfg.outputLength/8,E=y/8,S=[],k=0;k<E;k++){var A=h[k],x=A.high,R=A.low;x=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,S.push(R),S.push(x)}return new p.init(S,y)},clone:function(){for(var v=w.clone.call(this),B=v._state=this._state.slice(0),s=0;s<25;s++)B[s]=B[s].clone();return v}});a.SHA3=w._createHelper(g),a.HmacSHA3=w._createHmacHelper(g)}(Math),o.SHA3})})(zt);var Bo=zt.exports;const Nt=xt(Bo);function To(...e){return e.reduce((t,o)=>t+o,0)}function Ao(e){try{return typeof e[Symbol==null?void 0:Symbol.iterator]=="function"}catch{return!1}}function Wt(e){const t=new Set;return JSON.stringify(e,(r,a)=>{if(typeof a=="object"&&a!==null){if(t.has(a))return;t.add(a),Ao(a)&&(a=[...a])}return a})}const _o=e=>Nt(e,{outputLength:256}).toString(),Mo=/0b[0-1]+/i;function pe(e){if(typeof e=="number")return Math.round(e);if(e instanceof Object&&(e=Wt(e)),typeof e=="string"){if(Mo.test(e))return parseInt(e.substring(2,e.length-1),2);const t=parseInt(e);return Number.isNaN(t)?t:To(parseInt(_o(e),16))}else return Date.now()}const L=624,be=397,xo=2567483615,We=2147483648,Pe=2147483647;class ko{constructor(t){me(this,"mt",new Array(L));me(this,"mti",L+1);me(this,"seed");return this.seed=t=pe(t),Array.isArray(t)?this.init_by_array(t,t.length):this.init_seed(t),this}init_seed(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<L;this.mti++)t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(((t&4294901760)>>>16)*1812433253<<16)+(t&65535)*1812433253+this.mti,this.mt[this.mti]>>>=0}init_by_array(t,o){let r,a,i;for(this.init_seed(19650218),r=1,a=0,i=L>o?L:o;i!==0;i--){const p=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(((p&4294901760)>>>16)*1664525<<16)+(p&65535)*1664525)+t[a]+a,this.mt[r]>>>=0,r++,a++,r>=L&&(this.mt[0]=this.mt[L-1],r=1),a>=o&&(a=0)}for(i=L-1;i!==0;i--){const p=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(((p&4294901760)>>>16)*1566083941<<16)+(p&65535)*1566083941)-r,this.mt[r]>>>=0,r++,r>=L&&(this.mt[0]=this.mt[L-1],r=1)}this.mt[0]=2147483648}random_int(){let t;const o=new Array(0,xo);if(this.mti>=L){let r;for(this.mti===L+1&&this.init_seed(5489),r=0;r<L-be;r++)t=this.mt[r]&We|this.mt[r+1]&Pe,this.mt[r]=this.mt[r+be]^t>>>1^o[t&1];for(;r<L-1;r++)t=this.mt[r]&We|this.mt[r+1]&Pe,this.mt[r]=this.mt[r+(be-L)]^t>>>1^o[t&1];t=this.mt[L-1]&We|this.mt[0]&Pe,this.mt[L-1]=this.mt[be-1]^t>>>1^o[t&1],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,t^=t>>>18,t>>>0}random_int31(){return this.random_int()>>>1}random_incl(){return this.random_int()*(1/4294967295)}random(){return this.random_int()*(1/4294967296)}random_excl(){return(this.random_int()+.5)*(1/4294967296)}random_long(){return((this.random_int()>>>5)*67108864+(this.random_int()>>>6))*(1/9007199254740992)}}function Pt(e){return new ko(e)}const{BASE10_CHARSET:Ro,BASE16_CHARSET:Io,BASE64WEB_CHARSET:Oo}=Re,Ho=Pt(),Vt=(e=Ho)=>e.random(),Fe=(e,t,o)=>((t===void 0||t===0)&&(t=e,e=0),Math.floor(e+Vt(o)*t)),qt=(e,t)=>e[Fe(0,e.length,t)],Ut=(e,t=1,o)=>{const r=[],a=[];for(let i=0;i<t;i++)a.length===0&&a.push(...e),r.push(a.splice(Fe(0,a.length,o),1)[0]);return r},Lo=(e,t)=>Ut(e,e.length,t),we=(e,t=8,o)=>new Array(t).fill(0).map(r=>qt(e,o)).join(""),jt={MT:Pt,toSeed:pe,rand:Vt,randInt:Fe,charset:we,choice:qt,choices:Ut,shuffle:Lo,base10:(e=6,t)=>we(Ro,e,t),base16:(e=32,t)=>we(Io,e,t),base64:(e=32,t)=>we(Oo,e,t),lcg(e){let t=pe(e);return()=>(t=(t*1664525+1013904223)%4294967296)/4294967296}};var Xt={exports:{}};(function(e,t){(function(o,r){e.exports=r(Ye())})(ee,function(o){return function(r){var a=o,i=a.lib,p=i.WordArray,w=i.Hasher,_=a.algo,n=[];(function(){for(var g=0;g<64;g++)n[g]=r.abs(r.sin(g+1))*4294967296|0})();var m=_.MD5=w.extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,v){for(var B=0;B<16;B++){var s=v+B,d=g[s];g[s]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360}var h=this._hash.words,y=g[v+0],E=g[v+1],S=g[v+2],k=g[v+3],A=g[v+4],x=g[v+5],R=g[v+6],O=g[v+7],P=g[v+8],q=g[v+9],I=g[v+10],D=g[v+11],N=g[v+12],z=g[v+13],U=g[v+14],j=g[v+15],l=h[0],u=h[1],c=h[2],f=h[3];l=C(l,u,c,f,y,7,n[0]),f=C(f,l,u,c,E,12,n[1]),c=C(c,f,l,u,S,17,n[2]),u=C(u,c,f,l,k,22,n[3]),l=C(l,u,c,f,A,7,n[4]),f=C(f,l,u,c,x,12,n[5]),c=C(c,f,l,u,R,17,n[6]),u=C(u,c,f,l,O,22,n[7]),l=C(l,u,c,f,P,7,n[8]),f=C(f,l,u,c,q,12,n[9]),c=C(c,f,l,u,I,17,n[10]),u=C(u,c,f,l,D,22,n[11]),l=C(l,u,c,f,N,7,n[12]),f=C(f,l,u,c,z,12,n[13]),c=C(c,f,l,u,U,17,n[14]),u=C(u,c,f,l,j,22,n[15]),l=b(l,u,c,f,E,5,n[16]),f=b(f,l,u,c,R,9,n[17]),c=b(c,f,l,u,D,14,n[18]),u=b(u,c,f,l,y,20,n[19]),l=b(l,u,c,f,x,5,n[20]),f=b(f,l,u,c,I,9,n[21]),c=b(c,f,l,u,j,14,n[22]),u=b(u,c,f,l,A,20,n[23]),l=b(l,u,c,f,q,5,n[24]),f=b(f,l,u,c,U,9,n[25]),c=b(c,f,l,u,k,14,n[26]),u=b(u,c,f,l,P,20,n[27]),l=b(l,u,c,f,z,5,n[28]),f=b(f,l,u,c,S,9,n[29]),c=b(c,f,l,u,O,14,n[30]),u=b(u,c,f,l,N,20,n[31]),l=M(l,u,c,f,x,4,n[32]),f=M(f,l,u,c,P,11,n[33]),c=M(c,f,l,u,D,16,n[34]),u=M(u,c,f,l,U,23,n[35]),l=M(l,u,c,f,E,4,n[36]),f=M(f,l,u,c,A,11,n[37]),c=M(c,f,l,u,O,16,n[38]),u=M(u,c,f,l,I,23,n[39]),l=M(l,u,c,f,z,4,n[40]),f=M(f,l,u,c,y,11,n[41]),c=M(c,f,l,u,k,16,n[42]),u=M(u,c,f,l,R,23,n[43]),l=M(l,u,c,f,q,4,n[44]),f=M(f,l,u,c,N,11,n[45]),c=M(c,f,l,u,j,16,n[46]),u=M(u,c,f,l,S,23,n[47]),l=T(l,u,c,f,y,6,n[48]),f=T(f,l,u,c,O,10,n[49]),c=T(c,f,l,u,U,15,n[50]),u=T(u,c,f,l,x,21,n[51]),l=T(l,u,c,f,N,6,n[52]),f=T(f,l,u,c,k,10,n[53]),c=T(c,f,l,u,I,15,n[54]),u=T(u,c,f,l,E,21,n[55]),l=T(l,u,c,f,P,6,n[56]),f=T(f,l,u,c,j,10,n[57]),c=T(c,f,l,u,R,15,n[58]),u=T(u,c,f,l,z,21,n[59]),l=T(l,u,c,f,A,6,n[60]),f=T(f,l,u,c,D,10,n[61]),c=T(c,f,l,u,S,15,n[62]),u=T(u,c,f,l,q,21,n[63]),h[0]=h[0]+l|0,h[1]=h[1]+u|0,h[2]=h[2]+c|0,h[3]=h[3]+f|0},_doFinalize:function(){var g=this._data,v=g.words,B=this._nDataBytes*8,s=g.sigBytes*8;v[s>>>5]|=128<<24-s%32;var d=r.floor(B/4294967296),h=B;v[(s+64>>>9<<4)+15]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360,v[(s+64>>>9<<4)+14]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360,g.sigBytes=(v.length+1)*4,this._process();for(var y=this._hash,E=y.words,S=0;S<4;S++){var k=E[S];E[S]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}return y},clone:function(){var g=w.clone.call(this);return g._hash=this._hash.clone(),g}});function C(g,v,B,s,d,h,y){var E=g+(v&B|~v&s)+d+y;return(E<<h|E>>>32-h)+v}function b(g,v,B,s,d,h,y){var E=g+(v&s|B&~s)+d+y;return(E<<h|E>>>32-h)+v}function M(g,v,B,s,d,h,y){var E=g+(v^B^s)+d+y;return(E<<h|E>>>32-h)+v}function T(g,v,B,s,d,h,y){var E=g+(B^(v|~s))+d+y;return(E<<h|E>>>32-h)+v}a.MD5=w._createHelper(m),a.HmacMD5=w._createHmacHelper(m)}(Math),o.MD5})})(Xt);var $o=Xt.exports;const Do=xt($o),{MT:_e,shuffle:zo,randInt:Ce}=jt,{convert:Yt,getCharset:Ft}=Re,Gt=(e,t)=>{const o=zo(e,t);return()=>(o.push(o.shift()),o)},Kt=(e,t=16,o=1,r)=>{const a=Number.isNaN(+t)?64:+t,i=Ft(t),p=pe(r!==void 0?r:Ce(0,a)),w=_e(p),_=Gt(i,_e(Ce(0,1e6,w))),n=typeof e=="string"?e.split(""):e,m=[r!==void 0?i[Ce(0,a)]:Yt(p,10,t),...n.map(C=>_()[i.indexOf(C)])];return--o<1?m.join(""):Kt(m,t,o,r)},Qt=(e,t=16,o=1,r)=>{const a=Ft(t),i=pe(r!==void 0?r:+Yt(e[0],t,10)),p=_e(i),w=Gt(a,_e(Ce(0,1e6,p))),n=(typeof e=="string"?e.split(""):e).slice(1,e.length).map(m=>a[w().indexOf(m)]);return--o<1?n.join(""):Qt(n,t,o,r)},{textToBase64:No,base64ToText:Wo,secureBase64:Po}=Re;function Zt(e,t=1,o){return typeof e=="object"?e=Wt(e):typeof e!="string"&&(e=ke(e)),Kt(Po(No(e)),64,t,o)}function Vo(e,t=1,o,r=!0){if(e=Wo(Qt(e,64,t,o)),!r)return e;try{return JSON.parse(e)}catch{return e}}function qo(e,t=512,o){const r=Zt(e,1,o).substring(1);return t==="MD5"?Do(r).toString():Nt(r,{outputLength:t}).toString()}const Uo={e:Zt,d:Vo,h:qo},Jt=$("gpt4"),jo=2048,Q=[],en=()=>{for(;Q.length>1&&Q.slice(1,Q.length).join("").length>jo;)Q.shift()},Xo=()=>{if(!nn.value)return"";en();const e=Q.join(`
---
`);return e.length===0?"":`Conversation history
===
${e}`},Yo=(e="",t="",o=!0)=>{Q.push(`Question: ${e}
Answer: ${t}`),o&&en()},Fo=()=>{Q.splice(0,Q.length)},Go=["OFF","BASIC","ADVANCED"],Ko="OFF",Be=$(Ko),oe=$([]),Me=$([]),ae={add:Yo,get:Xo,clear:Fo},Qo=$(""),Ve=()=>{document.querySelector(".InputBox textarea").focus()},je=async e=>await $fetch("/api/more",{method:"POST",body:{question:e}}),tn=()=>new Promise((e,t)=>{$fetch("/api/token/check",{method:"POST"}).then(o=>{const{list:r,named:a}=o;Me.value=r.sort().map(i=>({id:i,name:a[i]})),e(!0)}).catch(o=>{ve.error("Initialization Failed"),t(o)})}),Zo=e=>new Promise((t,o)=>{const r=Re.convert(e,"64w",10);if(Qo.value=r,e==null)return ae.clear(),t(!0);$fetch("/api/history",{method:"POST",body:{id:e}}).then(async a=>{const i=a;i.length===0&&_t("/c/");const p=[];for(const n of i){const{Q:m,A:C,urls:b,queries:M,dt:T,t:g}=n,v=new Date(g);p.push({type:"Q",text:m,t:v},{type:"A",text:C,urls:b,queries:M,dt:T,t:v}),ae.add(m,C,!1)}oe.value.unshift(...p),t(!0);const w=oe.value.at(-2),_=oe.value.at(-1);_.more=await je(w.text)}).catch(a=>{ve.error("There was an error loading the conversation."),o(a)})}),pt=(e,t=!1)=>{if(!t){ae.clear();const o=Mn.service();Promise.all([e===null?null:tn(),Zo(e)]).finally(()=>{kt(),o!==null&&setTimeout(()=>{o.close()},500)})}},Jo="_t05",Te=$(Jo),nn=$(!0),J=$(!1),ue=$(J.value),ce=$(J.value),Ee=$(""),{h:er}=Uo,tr=()=>`${Jt.value}${Te.value}`,nr=()=>Be.value,or=()=>[77,68,53].map(e=>String.fromCharCode(e)).join(""),rr=(e,t,o)=>{const r=er(`${e}${t}`,or(),o),a=ke(o);return{hash:r,timestamp:a}},sr=(e,t,o,r,a)=>{var p,w;let i=(w=(p=At()._route)==null?void 0:p.params)==null?void 0:w.conv;return i||(i=jt.base64(8),Me.value.push({id:i,name:void 0}),_t(`/c/${i}`)),{conv:i,context:ae.get(),prompt:e,model:t,web:o,t:r,tz:a}},ar=e=>{const t=new Date,o=t.getTime(),r=t.getTimezoneOffset()/60*-1,a=sr(e,tr(),nr(),o,r),i=rr(e,a.context,o);return $fetch("/api/chat",{method:"POST",headers:i,body:a})},mt=(e="T",t="")=>St({type:e,text:t,queries:[],urls:[],dt:void 0,t:new Date});function vr(){const e=Tn(),t=e.get(ft);Go.includes(t)&&(Be.value=t);const o=e.get(dt)||"";/_t(?:0[0-9]|10)/.test(o)&&(Te.value=o),K(Be,m=>{typeof m=="string"&&e.set(ft,m,{path:"/"})}),K(Te,m=>{e.set(dt,m,{path:"/"})});const r=At(),a=()=>{var m,C;return(C=(m=r._route)==null?void 0:m.params)==null?void 0:C.conv},i=()=>{const m=a();return Me.value.filter(C=>C.id===m)[0].name||""};K(J,m=>{ct().isMobileScreen?(ue.value=!1,ce.value!==m&&(ce.value=m)):(ce.value=!1,ue.value!==m&&(ue.value=m))}),K(ce,m=>{J.value=m}),K(ue,m=>{J.value=m});const p=(m,C=!1,b=!1)=>{const M=a();(C||M!==m||m===null)&&(oe.value=[],pt(m,b)),ct().isMobileScreen&&(J.value=!1),Ve()},w=An().t,_=_n("version");return{model:Jt,conversations:Me,messages:oe,context:ae,webBrowsingMode:Be,temperatureSuffix:Te,contextMode:nn,openMenu:J,openSidebar:ue,openDrawer:ce,inputValue:Ee,getCurrentConvId:a,getCurrentConvName:i,checkTokenAndGetConversations:tn,initPage:pt,goToChat:p,sendMessage:m=>{if(document.querySelectorAll(".Message.T").length>1)return ve.info("Thinking too many questions."),!1;const b=m||Ee.value,M=b.trim();if(b===Ee.value&&(Ee.value=""),M==="")return!1;const T=mt();return oe.value.push(mt("Q",M)),oe.value.push(T),kt(),ar(M).then(g=>{const v=g.answer,B=g.urls,s=g.queries,d=g.dt,h="complete"in g?g.complete:!0,y=g.version;if(h||ve.warning(w("error.qTooLong")),!v)throw w("error.plzRefresh");T.text=v,T.urls=B||[],T.queries=s||[],T.dt=d||void 0,ae.add(M,v),y!==_.value&&fo.confirm(w("action.newVersion"),w("message.notice"),{confirmButtonText:w("message.ok"),cancelButtonText:w("message.cancel"),type:"warning"}).then(()=>{location.reload()}).finally(()=>{Ve()})}).catch(g=>{ve.error(g||"Oops! Something went wrong!"),T.text="Oops! Something went wrong!"}).finally(()=>{T.type="A",T.t=new Date}),je(M).then(g=>{T.more=g}).catch(()=>{}),!0},focusInput:Ve,predictMoreQuestions:je}}export{dr as E,Wn as a,Yn as b,Re as c,fo as d,ct as e,ke as s,vr as u};
