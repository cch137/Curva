import{B as L,aI as U,G as B,H as W,L as G,o as j,c as q,w as Q,R as V,j as X,u as $,a8 as K,U as Z,V as J,r as h,bH as Y,N as E,aw as tt,a as et,av as v,bD as nt,bE as st}from"./entry.58bcc5d7.js";import{b as ot}from"./el-button.1ec4fde7.js";const rt=L({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:U,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),ct=B({name:"ElText"}),at=B({...ct,props:rt,setup(t){const e=t,n=ot(),c=W("text"),r=G(()=>[c.b(),c.m(e.type),c.m(n.value),c.is("truncated",e.truncated)]);return(s,a)=>(j(),q(K(s.tag),{class:X($(r))},{default:Q(()=>[V(s.$slots,"default")]),_:3},8,["class"]))}});var it=Z(at,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const bt=J(it);function lt(){setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)})}const x="web-browsing",ut="temperature-suffix",y=t=>(t==null?void 0:t.toString)===void 0?"":t.toString(),pt=t=>y(t).toLowerCase(),b="01",H="0123456789",I="0123456789abcdef",k="0123456789abcdefghijklmnopqrstuvwxyz",R="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",S=t=>{switch(typeof t!="string"&&(t=pt(t)),t){case"2":return b;case"10":return H;case"16":return I;case"36":return k;case"62":return R;case"64":return u;case"64w":case"64+":return D;default:return t}},ht=(t,e,n,c=0)=>{typeof t!="string"&&(t=y(t));let r=0;if(+e==10)r=+Number(t);else if(+e<37)r=parseInt(t,+e);else{e=S(e);const a=e.length;for(let o=0;o<t.length;o++)r+=e.indexOf(t[o])*Math.pow(a,t.length-1-o)}let s="";if(+n<37&&(s=r.toString(+n),c<=1))return s;if(n=S(n),s===""){const a=n.length;for(;r>0;)s=n.charAt(r%a)+s,r=Math.floor(r/a)}return(s===""?n.charAt(0):s).padStart(c,n[0])},ft=t=>{const e=t.split("").map(s=>s.charCodeAt(0)),n=[];let c=0;for(;c<e.length;){const[s,a=0,o=0]=e.slice(c,c+=3),i=(s<<16)+(a<<8)+o,p=i>>18,d=i>>12&63,f=i>>6&63,F=i&63;n.push(u[p],u[d],u[f],u[F])}const r=e.length%3;return n.join("").slice(0,1+n.length-r)+(r===2?"==":r===1?"=":"")},dt=/[^A-Za-z0-9+/]/g,M=t=>t.replace(dt,""),g=t=>String.fromCharCode(+t),gt=t=>{const e=M(t).split(""),n=[];let c=0;for(;c<e.length;){const[r,s,a,o]=e.slice(c,c+=4).map(i=>u.indexOf(i));n.push(g(r<<2|s>>4)),a!==64&&n.push(g((s&15)<<4|a>>2)),o!==64&&n.push(g((a&3)<<6|o))}return n.join("").replaceAll("\0","")},mt={BASE2_CHARSET:b,BASE10_CHARSET:H,BASE16_CHARSET:I,BASE36_CHARSET:k,BASE62_CHARSET:R,BASE64_CHARSET:u,BASE64WEB_CHARSET:D,convert:ht,getCharset:S,secureBase64:M,textToBase64:ft,base64ToText:gt},N=2048,l=[],P=()=>{for(;l.length>1&&l.slice(1,l.length).join("").length>N;)l.shift()},St=()=>{if(!O.value)return"";P();const t=[...l].reverse().join(`
---
`);return t.length===0?"":`Here are your replies, from newest to oldest:
${t}`.substring(0,N)},wt=(...t)=>{l.push(...t),P()},Tt=()=>{l.splice(0,l.length)},At=["OFF","BASIC","ADVANCED"],Et="BASIC",m=h(Et),w=h([]),T=h([]),A={add:wt,get:St,clear:Tt},xt=h(""),Ct=()=>{document.querySelector(".InputBox textarea").focus()},z=()=>new Promise((t,e)=>{$fetch("/api/token/check",{method:"POST"}).then(n=>{const{list:c,named:r}=n;T.value=c.sort().map(s=>({id:s,name:r[s]})),t(!0)}).catch(n=>{v.error("Initialization Failed"),e(n)})}),_t=t=>new Promise((e,n)=>{const c=mt.convert(t,"64w",10);if(xt.value=c,t==null)return A.clear(),e(!0);$fetch("/api/history",{method:"POST",body:{id:t}}).then(r=>{const s=r;s.length===0&&st("/");const a=[];A.add(...s.map(o=>{const{Q:i,A:p,t:d}=o,f=new Date(d);return a.push({type:"Q",text:i,t:f},{type:"A",text:p,t:f}),p})),w.value.unshift(...a),e(!0)}).catch(r=>{v.error("There was an error loading the conversation."),n(r)})}),C=t=>{const e=nt.service();Promise.all([t===null?null:z(),_t(t)]).finally(()=>{lt(),setTimeout(()=>{e.close()},500)})},Bt="_t05",_=h(Bt),O=h(!0);function Ht(){const t=Y(),e=t.get(x);At.includes(e)&&(m.value=e),E(m,o=>{typeof o=="string"&&t.set(x,o,{path:"/"})}),E(_,o=>{t.set(ut,o,{path:"/"})});const n=tt(),c=()=>{var o,i;return(i=(o=n._route)==null?void 0:o.params)==null?void 0:i.conv},r=()=>{const o=c();return T.value.filter(i=>i.id===o)[0].name||""},s=et("openDrawer",()=>!1);return{conversations:T,messages:w,context:A,webBrowsingMode:m,temperatureSuffix:_,contextMode:O,getCurrentConvId:c,getCurrentConvName:r,checkTokenAndGetConversations:z,initPage:C,goToChat:(o,i=!1)=>{const p=c();(i||p!==o||o===null)&&(w.value=[],C(o)),s.value=!1,Ct()}}}export{bt as E,lt as a,mt as b,y as s,Ht as u};
