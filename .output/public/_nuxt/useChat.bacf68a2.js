import{b as Q,aQ as U,j as M,l as $,m as q,o as G,c as j,y as K,a6 as X,v as V,u as Z,z as J,H as Y,K as ee,r as p,bL as te,w as g,az as ne,ay as k,bp as se,bq as oe}from"./entry.cbdacdb6.js";import{a as re}from"./el-button.ebee394a.js";const ce=Q({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:U,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),ae=M({name:"ElText"}),ie=M({...ae,props:ce,setup(e){const n=e,t=re(),c=$("text"),o=q(()=>[c.b(),c.m(n.type),c.m(t.value),c.is("truncated",n.truncated)]);return(r,a)=>(G(),j(J(r.tag),{class:V(Z(o))},{default:K(()=>[X(r.$slots,"default")]),_:3},8,["class"]))}});var ue=Y(ie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const ke=ee(ue);async function le(){return await new Promise((e,n)=>{setTimeout(()=>{try{window.scrollTo(0,document.body.scrollHeight),e(null)}catch(t){n(t)}})})}const pe={get isMobileScreen(){return window.innerWidth<600},get isTouchScreen(){return"ontouchstart"in document||navigator.maxTouchPoints>0}};function _(){return pe}const y="web-browsing",B="temperature-suffix",H=e=>(e==null?void 0:e.toString)===void 0?"":e.toString(),fe=e=>H(e).toLowerCase(),I="01",P="0123456789",R="0123456789abcdef",z="0123456789abcdefghijklmnopqrstuvwxyz",D="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",A=e=>{switch(typeof e!="string"&&(e=fe(e)),e){case"2":return I;case"10":return P;case"16":return R;case"36":return z;case"62":return D;case"64":return h;case"64w":case"64+":return F;default:return e}},he=(e,n,t,c=0)=>{typeof e!="string"&&(e=H(e));let o=0;if(+n==10)o=+Number(e);else if(+n<37)o=parseInt(e,+n);else{n=A(n);const a=n.length;for(let i=0;i<e.length;i++)o+=n.indexOf(e[i])*Math.pow(a,e.length-1-i)}let r="";if(+t<37&&(r=o.toString(+t),c<=1))return r;if(t=A(t),r===""){const a=t.length;for(;o>0;)r=t.charAt(o%a)+r,o=Math.floor(o/a)}return(r===""?t.charAt(0):r).padStart(c,t[0])},de=e=>{const n=e.split("").map(r=>r.charCodeAt(0)),t=[];let c=0;for(;c<n.length;){const[r,a=0,i=0]=n.slice(c,c+=3),u=(r<<16)+(a<<8)+i,s=u>>18,l=u>>12&63,d=u>>6&63,w=u&63;t.push(h[s],h[l],h[d],h[w])}const o=n.length%3;return t.join("").slice(0,1+t.length-o)+(o===2?"==":o===1?"=":"")},ge=/[^A-Za-z0-9+/]/g,O=e=>e.replace(ge,""),T=e=>String.fromCharCode(+e),me=e=>{const n=O(e).split(""),t=[];let c=0;for(;c<n.length;){const[o,r,a,i]=n.slice(c,c+=4).map(u=>h.indexOf(u));t.push(T(o<<2|r>>4)),a!==64&&t.push(T((r&15)<<4|a>>2)),i!==64&&t.push(T((a&3)<<6|i))}return t.join("").replaceAll("\0","")},Se={BASE2_CHARSET:I,BASE10_CHARSET:P,BASE16_CHARSET:R,BASE36_CHARSET:z,BASE62_CHARSET:D,BASE64_CHARSET:h,BASE64WEB_CHARSET:F,convert:he,getCharset:A,secureBase64:O,textToBase64:de,base64ToText:me},we=2048,f=[],N=()=>{for(;f.length>1&&f.slice(1,f.length).join("").length>we;)f.shift()},Te=()=>{if(!W.value)return"";N();const e=f.join(`
---
`);return e.length===0?"":`Conversation history
===
${e}`},xe=(e="",n="",t=!0)=>{f.push(`Question: ${e}
Answer: ${n}`),t&&N()},ve=()=>{f.splice(0,f.length)},Ae=["OFF","BASIC","ADVANCED"],Ee="OFF",x=p(Ee),E=p([]),C=p([]),S={add:xe,get:Te,clear:ve},Ce=p(""),_e=()=>{document.querySelector(".InputBox textarea").focus()},L=()=>new Promise((e,n)=>{$fetch("/api/token/check",{method:"POST"}).then(t=>{const{list:c,named:o}=t;C.value=c.sort().map(r=>({id:r,name:o[r]})),e(!0)}).catch(t=>{k.error("Initialization Failed"),n(t)})}),ye=e=>new Promise((n,t)=>{const c=Se.convert(e,"64w",10);if(Ce.value=c,e==null)return S.clear(),n(!0);$fetch("/api/history",{method:"POST",body:{id:e}}).then(o=>{const r=o;r.length===0&&oe("/c/");const a=[];for(const i of r){const{Q:u,A:s,t:l}=i,d=new Date(l);a.push({type:"Q",text:u,t:d},{type:"A",text:s,t:d}),S.add(u,s,!1)}E.value.unshift(...a),n(!0)}).catch(o=>{k.error("There was an error loading the conversation."),t(o)})}),b=(e,n=!1)=>{if(!n){S.clear();const t=se.service();Promise.all([e===null?null:L(),ye(e)]).finally(()=>{le(),t!==null&&setTimeout(()=>{t.close()},500)})}},Be="_t05",v=p(Be),W=p(!0),m=p(!1);function He(){const e=te(),n=e.get(y);Ae.includes(n)&&(x.value=n);const t=e.get(B)||"";/_t(?:0[0-9]|10)/.test(t)&&(v.value=t),g(x,s=>{typeof s=="string"&&e.set(y,s,{path:"/"})}),g(v,s=>{e.set(B,s,{path:"/"})});const c=ne(),o=()=>{var s,l;return(l=(s=c._route)==null?void 0:s.params)==null?void 0:l.conv},r=()=>{const s=o();return C.value.filter(l=>l.id===s)[0].name||""},a=p(!0),i=p(!0);return g(m,s=>{_().isMobileScreen?(a.value=!1,i.value!==s&&(i.value=s)):(i.value=!1,a.value!==s&&(a.value=s))}),g(i,s=>{m.value=s}),g(a,s=>{m.value=s}),m.value=!0,{conversations:C,messages:E,context:S,webBrowsingMode:x,temperatureSuffix:v,contextMode:W,openMenu:m,openSidebar:a,openDrawer:i,getCurrentConvId:o,getCurrentConvName:r,checkTokenAndGetConversations:L,initPage:b,goToChat:(s,l=!1,d=!1)=>{const w=o();(l||w!==s||s===null)&&(E.value=[],b(s,d)),_().isMobileScreen&&(a.value=!1),_e()}}}export{ke as E,le as a,Se as b,H as s,He as u};
