import{b as Q,aQ as U,j as B,l as $,m as G,o as j,c as q,y as K,a6 as X,v as V,u as Z,z as J,H as Y,K as tt,r as p,L as et,w as E,az as nt,ay as b,bl as st,bm as ot}from"./entry.1aa6565f.js";import{a as rt}from"./el-button.a0321436.js";const ct=Q({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:U,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),at=B({name:"ElText"}),it=B({...at,props:ct,setup(t){const n=t,e=rt(),c=$("text"),s=G(()=>[c.b(),c.m(n.type),c.m(e.value),c.is("truncated",n.truncated)]);return(r,i)=>(j(),q(J(r.tag),{class:V(Z(s))},{default:K(()=>[X(r.$slots,"default")]),_:3},8,["class"]))}});var lt=Y(it,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const bt=tt(lt);function ut(){setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)})}const C="web-browsing",_="temperature-suffix",k=t=>(t==null?void 0:t.toString)===void 0?"":t.toString(),pt=t=>k(t).toLowerCase(),H="01",I="0123456789",R="0123456789abcdef",z="0123456789abcdefghijklmnopqrstuvwxyz",M="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",T=t=>{switch(typeof t!="string"&&(t=pt(t)),t){case"2":return H;case"10":return I;case"16":return R;case"36":return z;case"62":return M;case"64":return u;case"64w":case"64+":return F;default:return t}},ft=(t,n,e,c=0)=>{typeof t!="string"&&(t=k(t));let s=0;if(+n==10)s=+Number(t);else if(+n<37)s=parseInt(t,+n);else{n=T(n);const i=n.length;for(let o=0;o<t.length;o++)s+=n.indexOf(t[o])*Math.pow(i,t.length-1-o)}let r="";if(+e<37&&(r=s.toString(+e),c<=1))return r;if(e=T(e),r===""){const i=e.length;for(;s>0;)r=e.charAt(s%i)+r,s=Math.floor(s/i)}return(r===""?e.charAt(0):r).padStart(c,e[0])},ht=t=>{const n=t.split("").map(r=>r.charCodeAt(0)),e=[];let c=0;for(;c<n.length;){const[r,i=0,o=0]=n.slice(c,c+=3),a=(r<<16)+(i<<8)+o,f=a>>18,h=a>>12&63,d=a>>6&63,W=a&63;e.push(u[f],u[h],u[d],u[W])}const s=n.length%3;return e.join("").slice(0,1+e.length-s)+(s===2?"==":s===1?"=":"")},dt=/[^A-Za-z0-9+/]/g,N=t=>t.replace(dt,""),g=t=>String.fromCharCode(+t),gt=t=>{const n=N(t).split(""),e=[];let c=0;for(;c<n.length;){const[s,r,i,o]=n.slice(c,c+=4).map(a=>u.indexOf(a));e.push(g(s<<2|r>>4)),i!==64&&e.push(g((r&15)<<4|i>>2)),o!==64&&e.push(g((i&3)<<6|o))}return e.join("").replaceAll("\0","")},mt={BASE2_CHARSET:H,BASE10_CHARSET:I,BASE16_CHARSET:R,BASE36_CHARSET:z,BASE62_CHARSET:M,BASE64_CHARSET:u,BASE64WEB_CHARSET:F,convert:ft,getCharset:T,secureBase64:N,textToBase64:ht,base64ToText:gt},O=2048,l=[],P=()=>{for(;l.length>1&&l.slice(1,l.length).join("").length>O;)l.shift()},St=()=>{if(!L.value)return"";P();const t=[...l].reverse().join(`
---
`);return t.length===0?"":`Conversation history (from newest to oldest)
===
${t}`.substring(0,O)},Tt=(t="",n="",e=!0)=>{l.push(`Question: ${t}
Answer: ${n}`),e&&P()},wt=()=>{l.splice(0,l.length)},xt=["OFF","BASIC","ADVANCED"],At="OFF",m=p(At),w=p([]),x=p([]),A={add:Tt,get:St,clear:wt},Et=p(""),Ct=()=>{document.querySelector(".InputBox textarea").focus()},D=()=>new Promise((t,n)=>{$fetch("/api/token/check",{method:"POST"}).then(e=>{const{list:c,named:s}=e;x.value=c.sort().map(r=>({id:r,name:s[r]})),t(!0)}).catch(e=>{b.error("Initialization Failed"),n(e)})}),_t=t=>new Promise((n,e)=>{const c=mt.convert(t,"64w",10);if(Et.value=c,t==null)return A.clear(),n(!0);$fetch("/api/history",{method:"POST",body:{id:t}}).then(s=>{const r=s;r.length===0&&ot("/c/");const i=[];for(const o of r){const{Q:a,A:f,t:h}=o,d=new Date(h);i.push({type:"Q",text:a,t:d},{type:"A",text:f,t:d}),A.add(a,f,!1)}w.value.unshift(...i),n(!0)}).catch(s=>{b.error("There was an error loading the conversation."),e(s)})}),v=(t,n=!1)=>{if(!n){const e=st.service();Promise.all([t===null?null:D(),_t(t)]).finally(()=>{ut(),e!==null&&setTimeout(()=>{e.close()},500)})}},vt="_t05",S=p(vt),L=p(!0),y=p(!0);function kt(){const t=et(),n=t.get(C);xt.includes(n)&&(m.value=n);const e=t.get(_)||"";/_t(?:0[0-9]|10)/.test(e)&&(S.value=e),E(m,o=>{typeof o=="string"&&t.set(C,o,{path:"/"})}),E(S,o=>{t.set(_,o,{path:"/"})});const c=nt(),s=()=>{var o,a;return(a=(o=c._route)==null?void 0:o.params)==null?void 0:a.conv};return{conversations:x,messages:w,context:A,webBrowsingMode:m,temperatureSuffix:S,contextMode:L,openSidebar:y,getCurrentConvId:s,getCurrentConvName:()=>{const o=s();return x.value.filter(a=>a.id===o)[0].name||""},checkTokenAndGetConversations:D,initPage:v,goToChat:(o,a=!1,f=!1)=>{const h=s();(a||h!==o||o===null)&&(w.value=[],v(o,f)),y.value=!1,Ct()}}}export{bt as E,ut as a,mt as b,k as s,kt as u};
