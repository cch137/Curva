import{b as $,aQ as q,j as k,l as G,m as j,o as K,c as X,y as V,a6 as Z,v as J,u as Y,z as ee,H as te,K as ne,r as u,bL as se,w as g,az as oe,ay as H,bp as re,bq as ce}from"./entry.ce2b9388.js";import{a as ae}from"./el-button.11129a62.js";const ie=$({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:q,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),ue=k({name:"ElText"}),le=k({...ue,props:ie,setup(e){const s=e,t=ae(),c=G("text"),o=j(()=>[c.b(),c.m(s.type),c.m(t.value),c.is("truncated",s.truncated)]);return(r,i)=>(K(),X(ee(r.tag),{class:J(Y(o))},{default:V(()=>[Z(r.$slots,"default")]),_:3},8,["class"]))}});var pe=te(le,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const Ie=ne(pe);async function fe(){return await new Promise((e,s)=>{setTimeout(()=>{try{window.scrollTo(0,document.body.scrollHeight),e(null)}catch(t){s(t)}})})}const he={get isMobileScreen(){return window.innerWidth<600},get isTouchScreen(){return"ontouchstart"in document||navigator.maxTouchPoints>0}};function y(){return he}const B="web-browsing",b="temperature-suffix",I=e=>(e==null?void 0:e.toString)===void 0?"":e.toString(),de=e=>I(e).toLowerCase(),P="01",R="0123456789",z="0123456789abcdef",D="0123456789abcdefghijklmnopqrstuvwxyz",F="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",E=e=>{switch(typeof e!="string"&&(e=de(e)),e){case"2":return P;case"10":return R;case"16":return z;case"36":return D;case"62":return F;case"64":return f;case"64w":case"64+":return O;default:return e}},ge=(e,s,t,c=0)=>{typeof e!="string"&&(e=I(e));let o=0;if(+s==10)o=+Number(e);else if(+s<37)o=parseInt(e,+s);else{s=E(s);const i=s.length;for(let n=0;n<e.length;n++)o+=s.indexOf(e[n])*Math.pow(i,e.length-1-n)}let r="";if(+t<37&&(r=o.toString(+t),c<=1))return r;if(t=E(t),r===""){const i=t.length;for(;o>0;)r=t.charAt(o%i)+r,o=Math.floor(o/i)}return(r===""?t.charAt(0):r).padStart(c,t[0])},me=e=>{const s=e.split("").map(r=>r.charCodeAt(0)),t=[];let c=0;for(;c<s.length;){const[r,i=0,n=0]=s.slice(c,c+=3),a=(r<<16)+(i<<8)+n,h=a>>18,d=a>>12&63,w=a>>6&63,U=a&63;t.push(f[h],f[d],f[w],f[U])}const o=s.length%3;return t.join("").slice(0,1+t.length-o)+(o===2?"==":o===1?"=":"")},Se=/[^A-Za-z0-9+/]/g,N=e=>e.replace(Se,""),v=e=>String.fromCharCode(+e),we=e=>{const s=N(e).split(""),t=[];let c=0;for(;c<s.length;){const[o,r,i,n]=s.slice(c,c+=4).map(a=>f.indexOf(a));t.push(v(o<<2|r>>4)),i!==64&&t.push(v((r&15)<<4|i>>2)),n!==64&&t.push(v((i&3)<<6|n))}return t.join("").replaceAll("\0","")},Te={BASE2_CHARSET:P,BASE10_CHARSET:R,BASE16_CHARSET:z,BASE36_CHARSET:D,BASE62_CHARSET:F,BASE64_CHARSET:f,BASE64WEB_CHARSET:O,convert:ge,getCharset:E,secureBase64:N,textToBase64:me,base64ToText:we},ve=2048,l=[],L=()=>{for(;l.length>1&&l.slice(1,l.length).join("").length>ve;)l.shift()},xe=()=>{if(!Q.value)return"";L();const e=l.join(`
---
`);return e.length===0?"":`Conversation history
===
${e}`},Ae=(e="",s="",t=!0)=>{l.push(`Question: ${e}
Answer: ${s}`),t&&L()},Ee=()=>{l.splice(0,l.length)},Ce=["OFF","BASIC","ADVANCED"],_e="OFF",x=u(_e),C=u([]),_=u([]),T={add:Ae,get:xe,clear:Ee},ye=u(""),Be=()=>{document.querySelector(".InputBox textarea").focus()},W=()=>new Promise((e,s)=>{$fetch("/api/token/check",{method:"POST"}).then(t=>{const{list:c,named:o}=t;_.value=c.sort().map(r=>({id:r,name:o[r]})),e(!0)}).catch(t=>{H.error("Initialization Failed"),s(t)})}),be=e=>new Promise((s,t)=>{const c=Te.convert(e,"64w",10);if(ye.value=c,e==null)return T.clear(),s(!0);$fetch("/api/history",{method:"POST",body:{id:e}}).then(o=>{const r=o;r.length===0&&ce("/c/");const i=[];for(const n of r){const{Q:a,A:h,t:d}=n,w=new Date(d);i.push({type:"Q",text:a,t:w},{type:"A",text:h,t:w}),T.add(a,h,!1)}C.value.unshift(...i),s(!0)}).catch(o=>{H.error("There was an error loading the conversation."),t(o)})}),M=(e,s=!1)=>{if(!s){T.clear();const t=re.service();Promise.all([e===null?null:W(),be(e)]).finally(()=>{fe(),t!==null&&setTimeout(()=>{t.close()},500)})}},Me="_t05",A=u(Me),Q=u(!0),p=u(!1),m=u(p.value),S=u(p.value);function Pe(){const e=se(),s=e.get(B);Ce.includes(s)&&(x.value=s);const t=e.get(b)||"";/_t(?:0[0-9]|10)/.test(t)&&(A.value=t),g(x,n=>{typeof n=="string"&&e.set(B,n,{path:"/"})}),g(A,n=>{e.set(b,n,{path:"/"})});const c=oe(),o=()=>{var n,a;return(a=(n=c._route)==null?void 0:n.params)==null?void 0:a.conv},r=()=>{const n=o();return _.value.filter(a=>a.id===n)[0].name||""};return g(p,n=>{y().isMobileScreen?(m.value=!1,S.value!==n&&(S.value=n)):(S.value=!1,m.value!==n&&(m.value=n))}),g(S,n=>{p.value=n}),g(m,n=>{p.value=n}),{conversations:_,messages:C,context:T,webBrowsingMode:x,temperatureSuffix:A,contextMode:Q,openMenu:p,openSidebar:m,openDrawer:S,getCurrentConvId:o,getCurrentConvName:r,checkTokenAndGetConversations:W,initPage:M,goToChat:(n,a=!1,h=!1)=>{const d=o();(a||d!==n||n===null)&&(C.value=[],M(n,h)),y().isMobileScreen&&(p.value=!1),Be()}}}export{Ie as E,fe as a,Te as b,y as c,I as s,Pe as u};
