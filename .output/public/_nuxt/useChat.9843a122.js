var en=Object.defineProperty;var tn=(e,t,o)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var me=(e,t,o)=>(tn(e,typeof t!="symbol"?t+"":t,o),o);import{q as mt,ac as nn,aP as pt,p as Ze,N as on,l as qe,bH as rn,aZ as gt,bI as Je,w as F,bJ as sn,av as an,bK as ln,au as un,bs as Re,I as ce,aB as cn,b as yt,a as et,j as Me,C as K,P as Te,at as fn,aO as dn,m as Q,o as W,c as Y,y as V,v as O,u as vn,z as fe,H as bt,K as hn,E as mn,bL as pn,bM as gn,r as $,Q as je,bN as tt,aR as nt,an as yn,ax as ne,ak as Ie,t as X,F as ot,G as pe,s as He,A as oe,B as ie,x as ge,O as Oe,ay as Le,ar as bn,f as Et,bO as wt,bP as St,as as rt,ah as En,af as wn,az as st,bx as at,bQ as Sn,bR as J,bS as Ct,bT as Cn,aE as Bt,b9 as Bn,M as Tn,aD as re,bj as An,bU as Tt,bV as At}from"./entry.7a88b2f9.js";import{a as _n,E as Mn}from"./el-button.3ffc7551.js";import{t as xn,b as kn,E as Rn}from"./el-input.77976eac.js";import{a as In,i as Hn}from"./el-tag.712a0f61.js";const On='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Ln=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,it=e=>Array.from(e.querySelectorAll(On)).filter(t=>$n(t)&&Ln(t)),$n=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}};var we=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(we||{});const Dn=(e,t,o)=>{let r={offsetX:0,offsetY:0};const a=E=>{const A=E.clientX,n=E.clientY,{offsetX:_,offsetY:m}=r,g=e.value.getBoundingClientRect(),x=g.left,T=g.top,b=g.width,d=g.height,C=document.documentElement.clientWidth,s=document.documentElement.clientHeight,v=-x+_,h=-T+m,y=C-x-b+_,w=s-T-d+m,S=B=>{const M=Math.min(Math.max(_+B.clientX-A,v),y),R=Math.min(Math.max(m+B.clientY-n,h),w);r={offsetX:M,offsetY:R},e.value.style.transform=`translate(${Ze(M)}, ${Ze(R)})`},k=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",k)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",k)},i=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",a)},p=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",a)};mt(()=>{nn(()=>{o.value?i():p()})}),pt(()=>{p()})},zn=(e,t={})=>{on(e)||xn("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||qe("popup"),r=rn(()=>o.bm("parent","hidden"));if(!gt||Je(document.body,r.value))return;let a=0,i=!1,p="0";const E=()=>{setTimeout(()=>{un(document==null?void 0:document.body,r.value),i&&document&&(document.body.style.width=p)},200)};F(e,A=>{if(!A){E();return}i=!Je(document.body,r.value),i&&(p=document.body.style.width),a=kn(o.namespace.value);const n=document.documentElement.clientHeight<document.body.scrollHeight,_=sn(document.body,"overflowY");a>0&&(n||_==="scroll")&&i&&(document.body.style.width=`calc(100% - ${a}px)`),an(document.body,r.value)}),ln(()=>E())},_t=e=>{if(!e)return{onClick:Re,onMousedown:Re,onMouseup:Re};let t=!1,o=!1;return{onClick:p=>{t&&o&&e(p),t=o=!1},onMousedown:p=>{t=p.target===p.currentTarget},onMouseup:p=>{o=p.target===p.currentTarget}}},Ve="_trap-focus-children",ee=[],lt=e=>{if(ee.length===0)return;const t=ee[ee.length-1][Ve];if(t.length>0&&e.code===cn.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const o=e.shiftKey,r=e.target===t[0],a=e.target===t[t.length-1];r&&o&&(e.preventDefault(),t[t.length-1].focus()),a&&!o&&(e.preventDefault(),t[0].focus())}},Nn={beforeMount(e){e[Ve]=it(e),ee.push(e),ee.length<=1&&document.addEventListener("keydown",lt)},updated(e){ce(()=>{e[Ve]=it(e)})},unmounted(){ee.shift(),ee.length===0&&document.removeEventListener("keydown",lt)}},Wn=yt({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:et([String,Array,Object])},zIndex:{type:et([String,Number])}}),Pn={click:e=>e instanceof MouseEvent},Vn="overlay";var Un=Me({name:"ElOverlay",props:Wn,emits:Pn,setup(e,{slots:t,emit:o}){const r=qe(Vn),a=A=>{o("click",A)},{onClick:i,onMousedown:p,onMouseup:E}=_t(e.customMaskEvent?void 0:a);return()=>e.mask?K("div",{class:[r.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:i,onMousedown:p,onMouseup:E},[Te(t,"default")],we.STYLE|we.CLASS|we.PROPS,["onClick","onMouseup","onMousedown"]):fn("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Te(t,"default")])}});const qn=Un,jn=yt({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:dn,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),Xn=Me({name:"ElText"}),Yn=Me({...Xn,props:jn,setup(e){const t=e,o=_n(),r=qe("text"),a=Q(()=>[r.b(),r.m(t.type),r.m(o.value),r.is("truncated",t.truncated)]);return(i,p)=>(W(),Y(fe(i.tag),{class:O(vn(a))},{default:V(()=>[Te(i.$slots,"default")]),_:3},8,["class"]))}});var Gn=bt(Yn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const lr=hn(Gn),Kn=Me({name:"ElMessageBox",directives:{TrapFocus:Nn},components:{ElButton:Mn,ElFocusTrap:In,ElInput:Rn,ElOverlay:qn,ElIcon:mn,...pn},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Hn},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{locale:o,zIndex:r,ns:a,size:i}=gn("message-box",Q(()=>e.buttonSize)),{t:p}=o,{nextZIndex:E}=r,A=$(!1),n=je({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:E()}),_=Q(()=>{const I=n.type;return{[a.bm("icon",I)]:I&&tt[I]}}),m=nt(),g=nt(),x=Q(()=>n.icon||tt[n.type]||""),T=Q(()=>!!n.message),b=$(),d=$(),C=$(),s=$(),v=$(),h=Q(()=>n.confirmButtonClass);F(()=>n.inputValue,async I=>{await ce(),e.boxType==="prompt"&&I!==null&&R()},{immediate:!0}),F(()=>A.value,I=>{var D,N;I&&(e.boxType!=="prompt"&&(n.autofocus?C.value=(N=(D=v.value)==null?void 0:D.$el)!=null?N:b.value:C.value=b.value),n.zIndex=E()),e.boxType==="prompt"&&(I?ce().then(()=>{var z;s.value&&s.value.$el&&(n.autofocus?C.value=(z=H())!=null?z:b.value:C.value=b.value)}):(n.editorErrorMessage="",n.validateError=!1))});const y=Q(()=>e.draggable);Dn(b,d,y),mt(async()=>{await ce(),e.closeOnHashChange&&window.addEventListener("hashchange",w)}),pt(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",w)});function w(){A.value&&(A.value=!1,ce(()=>{n.action&&t("action",n.action)}))}const S=()=>{e.closeOnClickModal&&M(n.distinguishCancelAndClose?"close":"cancel")},k=_t(S),B=I=>{if(n.inputType!=="textarea")return I.preventDefault(),M("confirm")},M=I=>{var D;e.boxType==="prompt"&&I==="confirm"&&!R()||(n.action=I,n.beforeClose?(D=n.beforeClose)==null||D.call(n,I,n,w):w())},R=()=>{if(e.boxType==="prompt"){const I=n.inputPattern;if(I&&!I.test(n.inputValue||""))return n.editorErrorMessage=n.inputErrorMessage||p("el.messagebox.error"),n.validateError=!0,!1;const D=n.inputValidator;if(typeof D=="function"){const N=D(n.inputValue);if(N===!1)return n.editorErrorMessage=n.inputErrorMessage||p("el.messagebox.error"),n.validateError=!0,!1;if(typeof N=="string")return n.editorErrorMessage=N,n.validateError=!0,!1}}return n.editorErrorMessage="",n.validateError=!1,!0},H=()=>{const I=s.value.$refs;return I.input||I.textarea},P=()=>{M("close")},U=()=>{e.closeOnPressEscape&&P()};return e.lockScroll&&zn(A),{...yn(n),ns:a,overlayEvent:k,visible:A,hasMessage:T,typeClass:_,contentId:m,inputId:g,btnSize:i,iconComponent:x,confirmButtonClasses:h,rootRef:b,focusStartRef:C,headerRef:d,inputRef:s,confirmRef:v,doClose:w,handleClose:P,onCloseRequested:U,handleWrapperClick:S,handleInputEnter:B,handleAction:M,t:p}}}),Fn=["aria-label","aria-describedby"],Qn=["aria-label"],Zn=["id"];function Jn(e,t,o,r,a,i){const p=ne("el-icon"),E=ne("close"),A=ne("el-input"),n=ne("el-button"),_=ne("el-focus-trap"),m=ne("el-overlay");return W(),Y(bn,{name:"fade-in-linear",onAfterLeave:t[11]||(t[11]=g=>e.$emit("vanish")),persisted:""},{default:V(()=>[Ie(K(m,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:V(()=>[X("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:O(`${e.ns.namespace.value}-overlay-message-box`),onClick:t[8]||(t[8]=(...g)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...g)),onMousedown:t[9]||(t[9]=(...g)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...g)),onMouseup:t[10]||(t[10]=(...g)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...g))},[K(_,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:V(()=>[X("div",{ref:"rootRef",class:O([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:ot(e.customStyle),tabindex:"-1",onClick:t[7]||(t[7]=pe(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(W(),He("div",{key:0,ref:"headerRef",class:O(e.ns.e("header"))},[X("div",{class:O(e.ns.e("title"))},[e.iconComponent&&e.center?(W(),Y(p,{key:0,class:O([e.ns.e("status"),e.typeClass])},{default:V(()=>[(W(),Y(fe(e.iconComponent)))]),_:1},8,["class"])):oe("v-if",!0),X("span",null,ie(e.title),1)],2),e.showClose?(W(),He("button",{key:0,type:"button",class:O(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:t[0]||(t[0]=g=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:t[1]||(t[1]=ge(pe(g=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[K(p,{class:O(e.ns.e("close"))},{default:V(()=>[K(E)]),_:1},8,["class"])],42,Qn)):oe("v-if",!0)],2)):oe("v-if",!0),X("div",{id:e.contentId,class:O(e.ns.e("content"))},[X("div",{class:O(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(W(),Y(p,{key:0,class:O([e.ns.e("status"),e.typeClass])},{default:V(()=>[(W(),Y(fe(e.iconComponent)))]),_:1},8,["class"])):oe("v-if",!0),e.hasMessage?(W(),He("div",{key:1,class:O(e.ns.e("message"))},[Te(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(W(),Y(fe(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(W(),Y(fe(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:V(()=>[Oe(ie(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):oe("v-if",!0)],2),Ie(X("div",{class:O(e.ns.e("input"))},[K(A,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=g=>e.inputValue=g),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:O({invalid:e.validateError}),onKeydown:ge(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),X("div",{class:O(e.ns.e("errormsg")),style:ot({visibility:e.editorErrorMessage?"visible":"hidden"})},ie(e.editorErrorMessage),7)],2),[[Le,e.showInput]])],10,Zn),X("div",{class:O(e.ns.e("btns"))},[e.showCancelButton?(W(),Y(n,{key:0,loading:e.cancelButtonLoading,class:O([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:t[3]||(t[3]=g=>e.handleAction("cancel")),onKeydown:t[4]||(t[4]=ge(pe(g=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:V(()=>[Oe(ie(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):oe("v-if",!0),Ie(K(n,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:O([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:t[5]||(t[5]=g=>e.handleAction("confirm")),onKeydown:t[6]||(t[6]=ge(pe(g=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:V(()=>[Oe(ie(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[Le,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,Fn)]),_:3},8,["z-index","overlay-class","mask"]),[[Le,e.visible]])]),_:3})}var eo=bt(Kn,[["render",Jn],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const de=new Map,to=e=>{let t=document.body;return e.appendTo&&(Et(e.appendTo)&&(t=document.querySelector(e.appendTo)),at(e.appendTo)&&(t=e.appendTo),at(t)||(t=document.body)),t},no=(e,t,o=null)=>{const r=K(eo,e,st(e.message)||wt(e.message)?{default:st(e.message)?e.message:()=>e.message}:null);return r.appContext=o,St(r,t),to(e).appendChild(t.firstElementChild),r.component},oo=()=>document.createElement("div"),ro=(e,t)=>{const o=oo();e.onVanish=()=>{St(null,o),de.delete(a)},e.onAction=i=>{const p=de.get(a);let E;e.showInput?E={value:a.inputValue,action:i}:E=i,e.callback?e.callback(E,r.proxy):i==="cancel"||i==="close"?e.distinguishCancelAndClose&&i!=="cancel"?p.reject("close"):p.reject("cancel"):p.resolve(E)};const r=no(e,o,t),a=r.proxy;for(const i in e)rt(e,i)&&!rt(a.$props,i)&&(a[i]=e[i]);return a.visible=!0,a};function ae(e,t=null){if(!gt)return Promise.reject();let o;return Et(e)||wt(e)?e={message:e}:o=e.callback,new Promise((r,a)=>{const i=ro(e,t??ae._context);de.set(i,{options:e,callback:o,resolve:r,reject:a})})}const so=["alert","confirm","prompt"],ao={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};so.forEach(e=>{ae[e]=io(e)});function io(e){return(t,o,r,a)=>{let i="";return En(o)?(r=o,i=""):wn(o)?i="":i=o,ae(Object.assign({title:i,message:t,type:"",...ao[e]},r,{boxType:e}),a)}}ae.close=()=>{de.forEach((e,t)=>{t.doClose()}),de.clear()};ae._context=null;const G=ae;G.install=e=>{G._context=e._context,e.config.globalProperties.$msgbox=G,e.config.globalProperties.$messageBox=G,e.config.globalProperties.$alert=G.alert,e.config.globalProperties.$confirm=G.confirm,e.config.globalProperties.$prompt=G.prompt};const lo=G,uo={},co=Object.freeze(Object.defineProperty({__proto__:null,default:uo},Symbol.toStringTag,{value:"Module"})),fo=Sn(co);async function ve(e=0){return await new Promise((t,o)=>{setTimeout(()=>{try{window.scrollTo(0,document.body.scrollHeight),t(null)}catch(r){o(r)}},+e||0)})}const vo={get isMobileScreen(){return window.innerWidth<600},get isTouchScreen(){return"ontouchstart"in document||navigator.maxTouchPoints>0}};function ut(){return vo}const ct="web-browsing",ft="temperature-suffix",xe=e=>(e==null?void 0:e.toString)===void 0?"":e.toString(),ho=e=>xe(e).toLowerCase(),Mt="01",xt="0123456789",kt="0123456789abcdef",Rt="0123456789abcdefghijklmnopqrstuvwxyz",It="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Ue=e=>{switch(typeof e!="string"&&(e=ho(e)),e){case"2":return Mt;case"10":return xt;case"16":return kt;case"36":return Rt;case"62":return It;case"64":return te;case"64w":case"64+":return Ht;default:return e}},mo=(e,t,o,r=0)=>{typeof e!="string"&&(e=xe(e));let a=0;if(+t==10)a=+Number(e);else if(+t<37)a=parseInt(e,+t);else{t=Ue(t);const p=t.length;for(let E=0;E<e.length;E++)a+=t.indexOf(e[E])*Math.pow(p,e.length-1-E)}let i="";if(+o<37&&(i=a.toString(+o),r<=1))return i;if(o=Ue(o),i===""){const p=o.length;for(;a>0;)i=o.charAt(a%p)+i,a=Math.floor(a/p)}return(i===""?o.charAt(0):i).padStart(r,o[0])},po=e=>{const t=e.split("").map(i=>i.charCodeAt(0)),o=[];let r=0;for(;r<t.length;){const[i,p=0,E=0]=t.slice(r,r+=3),A=(i<<16)+(p<<8)+E,n=A>>18,_=A>>12&63,m=A>>6&63,g=A&63;o.push(te[n],te[_],te[m],te[g])}const a=t.length%3;return o.join("").slice(0,1+o.length-a)+(a===2?"==":a===1?"=":"")},go=/[^A-Za-z0-9+/]/g,Ot=e=>e.replace(go,""),$e=e=>String.fromCharCode(+e),yo=e=>{const t=Ot(e).split(""),o=[];let r=0;for(;r<t.length;){const[a,i,p,E]=t.slice(r,r+=4).map(A=>te.indexOf(A));o.push($e(a<<2|i>>4)),p!==64&&o.push($e((i&15)<<4|p>>2)),E!==64&&o.push($e((p&3)<<6|E))}return o.join("").replaceAll("\0","")},ke={BASE2_CHARSET:Mt,BASE10_CHARSET:xt,BASE16_CHARSET:kt,BASE36_CHARSET:Rt,BASE62_CHARSET:It,BASE64_CHARSET:te,BASE64WEB_CHARSET:Ht,convert:mo,getCharset:Ue,secureBase64:Ot,textToBase64:po,base64ToText:yo};var Lt={exports:{}};function bo(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var De={exports:{}},dt;function Xe(){return dt||(dt=1,function(e,t){(function(o,r){e.exports=r()})(J,function(){var o=o||function(r,a){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof J<"u"&&J.crypto&&(i=J.crypto),!i&&typeof bo=="function")try{i=fo}catch{}var p=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},E=Object.create||function(){function s(){}return function(v){var h;return s.prototype=v,h=new s,s.prototype=null,h}}(),A={},n=A.lib={},_=n.Base=function(){return{extend:function(s){var v=E(this);return s&&v.mixIn(s),(!v.hasOwnProperty("init")||this.init===v.init)&&(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var s=this.extend();return s.init.apply(s,arguments),s},init:function(){},mixIn:function(s){for(var v in s)s.hasOwnProperty(v)&&(this[v]=s[v]);s.hasOwnProperty("toString")&&(this.toString=s.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),m=n.WordArray=_.extend({init:function(s,v){s=this.words=s||[],v!=a?this.sigBytes=v:this.sigBytes=s.length*4},toString:function(s){return(s||x).stringify(this)},concat:function(s){var v=this.words,h=s.words,y=this.sigBytes,w=s.sigBytes;if(this.clamp(),y%4)for(var S=0;S<w;S++){var k=h[S>>>2]>>>24-S%4*8&255;v[y+S>>>2]|=k<<24-(y+S)%4*8}else for(var B=0;B<w;B+=4)v[y+B>>>2]=h[B>>>2];return this.sigBytes+=w,this},clamp:function(){var s=this.words,v=this.sigBytes;s[v>>>2]&=4294967295<<32-v%4*8,s.length=r.ceil(v/4)},clone:function(){var s=_.clone.call(this);return s.words=this.words.slice(0),s},random:function(s){for(var v=[],h=0;h<s;h+=4)v.push(p());return new m.init(v,s)}}),g=A.enc={},x=g.Hex={stringify:function(s){for(var v=s.words,h=s.sigBytes,y=[],w=0;w<h;w++){var S=v[w>>>2]>>>24-w%4*8&255;y.push((S>>>4).toString(16)),y.push((S&15).toString(16))}return y.join("")},parse:function(s){for(var v=s.length,h=[],y=0;y<v;y+=2)h[y>>>3]|=parseInt(s.substr(y,2),16)<<24-y%8*4;return new m.init(h,v/2)}},T=g.Latin1={stringify:function(s){for(var v=s.words,h=s.sigBytes,y=[],w=0;w<h;w++){var S=v[w>>>2]>>>24-w%4*8&255;y.push(String.fromCharCode(S))}return y.join("")},parse:function(s){for(var v=s.length,h=[],y=0;y<v;y++)h[y>>>2]|=(s.charCodeAt(y)&255)<<24-y%4*8;return new m.init(h,v)}},b=g.Utf8={stringify:function(s){try{return decodeURIComponent(escape(T.stringify(s)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(s){return T.parse(unescape(encodeURIComponent(s)))}},d=n.BufferedBlockAlgorithm=_.extend({reset:function(){this._data=new m.init,this._nDataBytes=0},_append:function(s){typeof s=="string"&&(s=b.parse(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes},_process:function(s){var v,h=this._data,y=h.words,w=h.sigBytes,S=this.blockSize,k=S*4,B=w/k;s?B=r.ceil(B):B=r.max((B|0)-this._minBufferSize,0);var M=B*S,R=r.min(M*4,w);if(M){for(var H=0;H<M;H+=S)this._doProcessBlock(y,H);v=y.splice(0,M),h.sigBytes-=R}return new m.init(v,R)},clone:function(){var s=_.clone.call(this);return s._data=this._data.clone(),s},_minBufferSize:0});n.Hasher=d.extend({cfg:_.extend(),init:function(s){this.cfg=this.cfg.extend(s),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(s){return this._append(s),this._process(),this},finalize:function(s){s&&this._append(s);var v=this._doFinalize();return v},blockSize:16,_createHelper:function(s){return function(v,h){return new s.init(h).finalize(v)}},_createHmacHelper:function(s){return function(v,h){return new C.HMAC.init(s,h).finalize(v)}}});var C=A.algo={};return A}(Math);return o})}(De)),De.exports}var ze={exports:{}},vt;function Eo(){return vt||(vt=1,function(e,t){(function(o,r){e.exports=r(Xe())})(J,function(o){return function(r){var a=o,i=a.lib,p=i.Base,E=i.WordArray,A=a.x64={};A.Word=p.extend({init:function(n,_){this.high=n,this.low=_}}),A.WordArray=p.extend({init:function(n,_){n=this.words=n||[],_!=r?this.sigBytes=_:this.sigBytes=n.length*8},toX32:function(){for(var n=this.words,_=n.length,m=[],g=0;g<_;g++){var x=n[g];m.push(x.high),m.push(x.low)}return E.create(m,this.sigBytes)},clone:function(){for(var n=p.clone.call(this),_=n.words=this.words.slice(0),m=_.length,g=0;g<m;g++)_[g]=_[g].clone();return n}})}(),o})}(ze)),ze.exports}(function(e,t){(function(o,r,a){e.exports=r(Xe(),Eo())})(J,function(o){return function(r){var a=o,i=a.lib,p=i.WordArray,E=i.Hasher,A=a.x64,n=A.Word,_=a.algo,m=[],g=[],x=[];(function(){for(var d=1,C=0,s=0;s<24;s++){m[d+5*C]=(s+1)*(s+2)/2%64;var v=C%5,h=(2*d+3*C)%5;d=v,C=h}for(var d=0;d<5;d++)for(var C=0;C<5;C++)g[d+5*C]=C+(2*d+3*C)%5*5;for(var y=1,w=0;w<24;w++){for(var S=0,k=0,B=0;B<7;B++){if(y&1){var M=(1<<B)-1;M<32?k^=1<<M:S^=1<<M-32}y&128?y=y<<1^113:y<<=1}x[w]=n.create(S,k)}})();var T=[];(function(){for(var d=0;d<25;d++)T[d]=n.create()})();var b=_.SHA3=E.extend({cfg:E.cfg.extend({outputLength:512}),_doReset:function(){for(var d=this._state=[],C=0;C<25;C++)d[C]=new n.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(d,C){for(var s=this._state,v=this.blockSize/2,h=0;h<v;h++){var y=d[C+2*h],w=d[C+2*h+1];y=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360;var S=s[h];S.high^=w,S.low^=y}for(var k=0;k<24;k++){for(var B=0;B<5;B++){for(var M=0,R=0,H=0;H<5;H++){var S=s[B+5*H];M^=S.high,R^=S.low}var P=T[B];P.high=M,P.low=R}for(var B=0;B<5;B++)for(var U=T[(B+4)%5],I=T[(B+1)%5],D=I.high,N=I.low,M=U.high^(D<<1|N>>>31),R=U.low^(N<<1|D>>>31),H=0;H<5;H++){var S=s[B+5*H];S.high^=M,S.low^=R}for(var z=1;z<25;z++){var M,R,S=s[z],q=S.high,j=S.low,l=m[z];l<32?(M=q<<l|j>>>32-l,R=j<<l|q>>>32-l):(M=j<<l-32|q>>>64-l,R=q<<l-32|j>>>64-l);var u=T[g[z]];u.high=M,u.low=R}var c=T[0],f=s[0];c.high=f.high,c.low=f.low;for(var B=0;B<5;B++)for(var H=0;H<5;H++){var z=B+5*H,S=s[z],Ge=T[z],Ke=T[(B+1)%5+5*H],Fe=T[(B+2)%5+5*H];S.high=Ge.high^~Ke.high&Fe.high,S.low=Ge.low^~Ke.low&Fe.low}var S=s[0],Qe=x[k];S.high^=Qe.high,S.low^=Qe.low}},_doFinalize:function(){var d=this._data,C=d.words;this._nDataBytes*8;var s=d.sigBytes*8,v=this.blockSize*32;C[s>>>5]|=1<<24-s%32,C[(r.ceil((s+1)/v)*v>>>5)-1]|=128,d.sigBytes=C.length*4,this._process();for(var h=this._state,y=this.cfg.outputLength/8,w=y/8,S=[],k=0;k<w;k++){var B=h[k],M=B.high,R=B.low;M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,S.push(R),S.push(M)}return new p.init(S,y)},clone:function(){for(var d=E.clone.call(this),C=d._state=this._state.slice(0),s=0;s<25;s++)C[s]=C[s].clone();return d}});a.SHA3=E._createHelper(b),a.HmacSHA3=E._createHmacHelper(b)}(Math),o.SHA3})})(Lt);var wo=Lt.exports;const $t=Ct(wo);function So(...e){return e.reduce((t,o)=>t+o,0)}function Co(e){try{return typeof e[Symbol==null?void 0:Symbol.iterator]=="function"}catch{return!1}}function Dt(e){const t=new Set;return JSON.stringify(e,(r,a)=>{if(typeof a=="object"&&a!==null){if(t.has(a))return;t.add(a),Co(a)&&(a=[...a])}return a})}const Bo=e=>$t(e,{outputLength:256}).toString(),To=/0b[0-1]+/i;function he(e){if(typeof e=="number")return Math.round(e);if(e instanceof Object&&(e=Dt(e)),typeof e=="string"){if(To.test(e))return parseInt(e.substring(2,e.length-1),2);const t=parseInt(e);return Number.isNaN(t)?t:So(parseInt(Bo(e),16))}else return Date.now()}const L=624,ye=397,Ao=2567483615,Ne=2147483648,We=2147483647;class _o{constructor(t){me(this,"mt",new Array(L));me(this,"mti",L+1);me(this,"seed");return this.seed=t=he(t),Array.isArray(t)?this.init_by_array(t,t.length):this.init_seed(t),this}init_seed(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<L;this.mti++)t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(((t&4294901760)>>>16)*1812433253<<16)+(t&65535)*1812433253+this.mti,this.mt[this.mti]>>>=0}init_by_array(t,o){let r,a,i;for(this.init_seed(19650218),r=1,a=0,i=L>o?L:o;i!==0;i--){const p=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(((p&4294901760)>>>16)*1664525<<16)+(p&65535)*1664525)+t[a]+a,this.mt[r]>>>=0,r++,a++,r>=L&&(this.mt[0]=this.mt[L-1],r=1),a>=o&&(a=0)}for(i=L-1;i!==0;i--){const p=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(((p&4294901760)>>>16)*1566083941<<16)+(p&65535)*1566083941)-r,this.mt[r]>>>=0,r++,r>=L&&(this.mt[0]=this.mt[L-1],r=1)}this.mt[0]=2147483648}random_int(){let t;const o=new Array(0,Ao);if(this.mti>=L){let r;for(this.mti===L+1&&this.init_seed(5489),r=0;r<L-ye;r++)t=this.mt[r]&Ne|this.mt[r+1]&We,this.mt[r]=this.mt[r+ye]^t>>>1^o[t&1];for(;r<L-1;r++)t=this.mt[r]&Ne|this.mt[r+1]&We,this.mt[r]=this.mt[r+(ye-L)]^t>>>1^o[t&1];t=this.mt[L-1]&Ne|this.mt[0]&We,this.mt[L-1]=this.mt[ye-1]^t>>>1^o[t&1],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,t^=t>>>18,t>>>0}random_int31(){return this.random_int()>>>1}random_incl(){return this.random_int()*(1/4294967295)}random(){return this.random_int()*(1/4294967296)}random_excl(){return(this.random_int()+.5)*(1/4294967296)}random_long(){return((this.random_int()>>>5)*67108864+(this.random_int()>>>6))*(1/9007199254740992)}}function zt(e){return new _o(e)}const{BASE10_CHARSET:Mo,BASE16_CHARSET:xo,BASE64WEB_CHARSET:ko}=ke,Ro=zt(),Nt=(e=Ro)=>e.random(),Ye=(e,t,o)=>((t===void 0||t===0)&&(t=e,e=0),Math.floor(e+Nt(o)*t)),Wt=(e,t)=>e[Ye(0,e.length,t)],Pt=(e,t=1,o)=>{const r=[],a=[];for(let i=0;i<t;i++)a.length===0&&a.push(...e),r.push(a.splice(Ye(0,a.length,o),1)[0]);return r},Io=(e,t)=>Pt(e,e.length,t),be=(e,t=8,o)=>new Array(t).fill(0).map(r=>Wt(e,o)).join(""),Vt={MT:zt,toSeed:he,rand:Nt,randInt:Ye,charset:be,choice:Wt,choices:Pt,shuffle:Io,base10:(e=6,t)=>be(Mo,e,t),base16:(e=32,t)=>be(xo,e,t),base64:(e=32,t)=>be(ko,e,t),lcg(e){let t=he(e);return()=>(t=(t*1664525+1013904223)%4294967296)/4294967296}};var Ut={exports:{}};(function(e,t){(function(o,r){e.exports=r(Xe())})(J,function(o){return function(r){var a=o,i=a.lib,p=i.WordArray,E=i.Hasher,A=a.algo,n=[];(function(){for(var b=0;b<64;b++)n[b]=r.abs(r.sin(b+1))*4294967296|0})();var _=A.MD5=E.extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(b,d){for(var C=0;C<16;C++){var s=d+C,v=b[s];b[s]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360}var h=this._hash.words,y=b[d+0],w=b[d+1],S=b[d+2],k=b[d+3],B=b[d+4],M=b[d+5],R=b[d+6],H=b[d+7],P=b[d+8],U=b[d+9],I=b[d+10],D=b[d+11],N=b[d+12],z=b[d+13],q=b[d+14],j=b[d+15],l=h[0],u=h[1],c=h[2],f=h[3];l=m(l,u,c,f,y,7,n[0]),f=m(f,l,u,c,w,12,n[1]),c=m(c,f,l,u,S,17,n[2]),u=m(u,c,f,l,k,22,n[3]),l=m(l,u,c,f,B,7,n[4]),f=m(f,l,u,c,M,12,n[5]),c=m(c,f,l,u,R,17,n[6]),u=m(u,c,f,l,H,22,n[7]),l=m(l,u,c,f,P,7,n[8]),f=m(f,l,u,c,U,12,n[9]),c=m(c,f,l,u,I,17,n[10]),u=m(u,c,f,l,D,22,n[11]),l=m(l,u,c,f,N,7,n[12]),f=m(f,l,u,c,z,12,n[13]),c=m(c,f,l,u,q,17,n[14]),u=m(u,c,f,l,j,22,n[15]),l=g(l,u,c,f,w,5,n[16]),f=g(f,l,u,c,R,9,n[17]),c=g(c,f,l,u,D,14,n[18]),u=g(u,c,f,l,y,20,n[19]),l=g(l,u,c,f,M,5,n[20]),f=g(f,l,u,c,I,9,n[21]),c=g(c,f,l,u,j,14,n[22]),u=g(u,c,f,l,B,20,n[23]),l=g(l,u,c,f,U,5,n[24]),f=g(f,l,u,c,q,9,n[25]),c=g(c,f,l,u,k,14,n[26]),u=g(u,c,f,l,P,20,n[27]),l=g(l,u,c,f,z,5,n[28]),f=g(f,l,u,c,S,9,n[29]),c=g(c,f,l,u,H,14,n[30]),u=g(u,c,f,l,N,20,n[31]),l=x(l,u,c,f,M,4,n[32]),f=x(f,l,u,c,P,11,n[33]),c=x(c,f,l,u,D,16,n[34]),u=x(u,c,f,l,q,23,n[35]),l=x(l,u,c,f,w,4,n[36]),f=x(f,l,u,c,B,11,n[37]),c=x(c,f,l,u,H,16,n[38]),u=x(u,c,f,l,I,23,n[39]),l=x(l,u,c,f,z,4,n[40]),f=x(f,l,u,c,y,11,n[41]),c=x(c,f,l,u,k,16,n[42]),u=x(u,c,f,l,R,23,n[43]),l=x(l,u,c,f,U,4,n[44]),f=x(f,l,u,c,N,11,n[45]),c=x(c,f,l,u,j,16,n[46]),u=x(u,c,f,l,S,23,n[47]),l=T(l,u,c,f,y,6,n[48]),f=T(f,l,u,c,H,10,n[49]),c=T(c,f,l,u,q,15,n[50]),u=T(u,c,f,l,M,21,n[51]),l=T(l,u,c,f,N,6,n[52]),f=T(f,l,u,c,k,10,n[53]),c=T(c,f,l,u,I,15,n[54]),u=T(u,c,f,l,w,21,n[55]),l=T(l,u,c,f,P,6,n[56]),f=T(f,l,u,c,j,10,n[57]),c=T(c,f,l,u,R,15,n[58]),u=T(u,c,f,l,z,21,n[59]),l=T(l,u,c,f,B,6,n[60]),f=T(f,l,u,c,D,10,n[61]),c=T(c,f,l,u,S,15,n[62]),u=T(u,c,f,l,U,21,n[63]),h[0]=h[0]+l|0,h[1]=h[1]+u|0,h[2]=h[2]+c|0,h[3]=h[3]+f|0},_doFinalize:function(){var b=this._data,d=b.words,C=this._nDataBytes*8,s=b.sigBytes*8;d[s>>>5]|=128<<24-s%32;var v=r.floor(C/4294967296),h=C;d[(s+64>>>9<<4)+15]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,d[(s+64>>>9<<4)+14]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360,b.sigBytes=(d.length+1)*4,this._process();for(var y=this._hash,w=y.words,S=0;S<4;S++){var k=w[S];w[S]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}return y},clone:function(){var b=E.clone.call(this);return b._hash=this._hash.clone(),b}});function m(b,d,C,s,v,h,y){var w=b+(d&C|~d&s)+v+y;return(w<<h|w>>>32-h)+d}function g(b,d,C,s,v,h,y){var w=b+(d&s|C&~s)+v+y;return(w<<h|w>>>32-h)+d}function x(b,d,C,s,v,h,y){var w=b+(d^C^s)+v+y;return(w<<h|w>>>32-h)+d}function T(b,d,C,s,v,h,y){var w=b+(C^(d|~s))+v+y;return(w<<h|w>>>32-h)+d}a.MD5=E._createHelper(_),a.HmacMD5=E._createHmacHelper(_)}(Math),o.MD5})})(Ut);var Ho=Ut.exports;const Oo=Ct(Ho),{MT:Ae,shuffle:Lo,randInt:Se}=Vt,{convert:qt,getCharset:jt}=ke,Xt=(e,t)=>{const o=Lo(e,t);return()=>(o.push(o.shift()),o)},Yt=(e,t=16,o=1,r)=>{const a=Number.isNaN(+t)?64:+t,i=jt(t),p=he(r!==void 0?r:Se(0,a)),E=Ae(p),A=Xt(i,Ae(Se(0,1e6,E))),n=typeof e=="string"?e.split(""):e,_=[r!==void 0?i[Se(0,a)]:qt(p,10,t),...n.map(m=>A()[i.indexOf(m)])];return--o<1?_.join(""):Yt(_,t,o,r)},Gt=(e,t=16,o=1,r)=>{const a=jt(t),i=he(r!==void 0?r:+qt(e[0],t,10)),p=Ae(i),E=Xt(a,Ae(Se(0,1e6,p))),n=(typeof e=="string"?e.split(""):e).slice(1,e.length).map(_=>a[E().indexOf(_)]);return--o<1?n.join(""):Gt(n,t,o,r)},{textToBase64:$o,base64ToText:Do,secureBase64:zo}=ke;function Kt(e,t=1,o){return typeof e=="object"?e=Dt(e):typeof e!="string"&&(e=xe(e)),Yt(zo($o(e)),64,t,o)}function No(e,t=1,o,r=!0){if(e=Do(Gt(e,64,t,o)),!r)return e;try{return JSON.parse(e)}catch{return e}}function Wo(e,t=512,o){const r=Kt(e,1,o).substring(1);return t==="MD5"?Oo(r).toString():$t(r,{outputLength:t}).toString()}const Po={e:Kt,d:No,h:Wo},Ft=$("gpt4"),Vo=3e3,Uo=()=>{if(!Jt.value)return"";const e=se.value.filter(o=>o.done).map(o=>`Question: ${o.Q}
Answer: ${o.A}`);for(;e.length>1&&e.slice(1,e.length).join("").length>Vo;)e.shift();const t=e.join(`
---
`);return t.length===0?"":(e.push(),`Conversation history
===
${t}`)},qo=["OFF","BASIC","ADVANCED"],jo="OFF",Ce=$(jo),se=$([]),_e=$([]),Xo=$(""),Pe=()=>{document.querySelector(".InputBox textarea").focus()},Qt=async function(e){return await $fetch("/api/chat/suggestions",{method:"POST",body:{question:e}})},Zt=()=>new Promise((e,t)=>{$fetch("/api/token/check",{method:"POST"}).then(o=>{const{list:r,named:a}=o;_e.value=r.sort().map(i=>({id:i,name:a[i]})),e(!0)}).catch(o=>{re.error("Initialization Failed"),t(o)})}),Yo=e=>new Promise((t,o)=>{const r=ke.convert(e,"64w",10);if(Xo.value=r,e==null)return t(!0);$fetch("/api/chat/history",{method:"POST",body:{id:e}}).then(async a=>{const i=a;(!i||i.length===0)&&At("/c/"),se.value.unshift(...i.map(E=>je({...E,t:new Date(E.t),done:!!E.A}))),t(!0);const p=se.value.at(-1);Qt(p.Q).then(E=>{const A=Tt()>=document.body.clientHeight;p.more=E,A&&ve()})}).catch(a=>{re.error("There was an error loading the conversation."),o(a)})}),ht=(e,t=!1)=>{if(!t){const o=An.service();Promise.all([e===null?null:Zt(),Yo(e)]).finally(()=>{ve(),o!==null&&ve(500).finally(()=>o.close())})}},Go="_t05",Be=$(Go),Jt=$(!0),Z=$(!1),le=$(Z.value),ue=$(Z.value),Ee=$(""),{h:Ko}=Po,Fo=()=>`${Ft.value}${Be.value}`,Qo=()=>Ce.value,Zo=()=>[77,68,53].map(e=>String.fromCharCode(e)).join(""),Jo=(e,t,o)=>{const r=Ko(`${e}${t}`,Zo(),o),a=xe(o);return{hash:r,timestamp:a}},er=(e,t,o,r,a)=>{var p,E;let i=(E=(p=Bt()._route)==null?void 0:p.params)==null?void 0:E.conv;return i||(i=Vt.base64(8),_e.value.push({id:i,name:void 0}),At(`/c/${i}`)),{conv:i,context:Uo(),prompt:e,model:t,web:o,t:r,tz:a}},tr=e=>{const t=new Date,o=t.getTime(),r=t.getTimezoneOffset()/60*-1,a=er(e,Fo(),Qo(),o,r),i=Jo(e,a.context,o);return $fetch("/api/chat/answer",{method:"POST",headers:i,body:a})},nr=(e="",t="",o=!1)=>je({done:o,Q:e,A:t,queries:[],urls:[],dt:void 0,t:new Date});function ur(){const e=Cn(),t=e.get(ct);qo.includes(t)&&(Ce.value=t);const o=e.get(ft)||"";/_t(?:0[0-9]|10)/.test(o)&&(Be.value=o),F(Ce,m=>{typeof m=="string"&&e.set(ct,m,{path:"/"})}),F(Be,m=>{e.set(ft,m,{path:"/"})});const r=Bt(),a=()=>{var m,g;return(g=(m=r._route)==null?void 0:m.params)==null?void 0:g.conv},i=()=>{const m=a();return _e.value.filter(g=>g.id===m)[0].name||""};F(Z,m=>{ut().isMobileScreen?(le.value=!1,ue.value!==m&&(ue.value=m)):(ue.value=!1,le.value!==m&&(le.value=m))}),F(ue,m=>{Z.value=m}),F(le,m=>{Z.value=m});const p=(m,g=!1,x=!1)=>{const T=a();(g||T!==m||m===null)&&(se.value=[],ht(m,x)),ut().isMobileScreen&&(Z.value=!1),Pe()},E=Bn().t,A=Tn("version");return{model:Ft,conversations:_e,messages:se,webBrowsingMode:Ce,temperatureSuffix:Be,contextMode:Jt,openMenu:Z,openSidebar:le,openDrawer:ue,inputValue:Ee,getCurrentConvId:a,getCurrentConvName:i,checkTokenAndGetConversations:Zt,initPage:ht,goToChat:p,sendMessage:m=>{if(document.querySelectorAll(".Message.T").length>1)return re.info("Thinking too many questions."),!1;const x=m||Ee.value,T=x.trim();if(x===Ee.value&&(Ee.value=""),T==="")return!1;const b=nr(T,"",!1);return se.value.push(b),ve(),tr(T).then(d=>{const C=d.id,s=d.answer,v=d.urls,h=d.queries,y=d.dt,w="complete"in d?d.complete:!0,S=d.version;if(w||re.warning(E("error.qTooLong")),!s)throw E("error.plzRefresh");b.id=C,b.A=s,b.urls=v||[],b.queries=h||[],b.dt=y||void 0,S!==A.value&&lo.confirm(E("action.newVersion"),E("message.notice"),{confirmButtonText:E("message.ok"),cancelButtonText:E("message.cancel"),type:"warning"}).then(()=>{location.reload()}).finally(()=>{Pe()})}).catch(d=>{re.error(d||"Oops! Something went wrong!"),b.A="Oops! Something went wrong!"}).finally(()=>{b.done=!0,b.t=new Date}),Qt(T).then(d=>{const C=Tt()>=document.body.clientHeight;b.more=d,C&&ve()}).catch(()=>{}),!0},focusInput:Pe,exportAsMarkdown:()=>{re.info("This feature is not available yet.")}}}export{lr as E,zn as a,qn as b,ke as c,lo as d,ut as e,Vt as r,xe as s,ur as u};
