import{B as L,aI as U,G as B,H as W,L as G,o as j,c as q,w as Q,R as V,j as X,u as $,a8 as K,U as Z,V as J,r as f,bH as Y,N as E,aw as tt,a as et,av as v,bD as nt,bE as st}from"./entry.06e953ff.js";import{b as ot}from"./el-button.12264d10.js";const rt=L({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:U,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),ct=B({name:"ElText"}),at=B({...ct,props:rt,setup(t){const n=t,e=ot(),c=W("text"),r=G(()=>[c.b(),c.m(n.type),c.m(e.value),c.is("truncated",n.truncated)]);return(s,a)=>(j(),q(K(s.tag),{class:X($(r))},{default:Q(()=>[V(s.$slots,"default")]),_:3},8,["class"]))}});var it=Z(at,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const bt=J(it);function lt(){setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)})}const x="web-browsing",ut="temperature-suffix",y=t=>(t==null?void 0:t.toString)===void 0?"":t.toString(),pt=t=>y(t).toLowerCase(),b="01",H="0123456789",I="0123456789abcdef",k="0123456789abcdefghijklmnopqrstuvwxyz",R="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",S=t=>{switch(typeof t!="string"&&(t=pt(t)),t){case"2":return b;case"10":return H;case"16":return I;case"36":return k;case"62":return R;case"64":return u;case"64w":case"64+":return D;default:return t}},ft=(t,n,e,c=0)=>{typeof t!="string"&&(t=y(t));let r=0;if(+n==10)r=+Number(t);else if(+n<37)r=parseInt(t,+n);else{n=S(n);const a=n.length;for(let o=0;o<t.length;o++)r+=n.indexOf(t[o])*Math.pow(a,t.length-1-o)}let s="";if(+e<37&&(s=r.toString(+e),c<=1))return s;if(e=S(e),s===""){const a=e.length;for(;r>0;)s=e.charAt(r%a)+s,r=Math.floor(r/a)}return(s===""?e.charAt(0):s).padStart(c,e[0])},ht=t=>{const n=t.split("").map(s=>s.charCodeAt(0)),e=[];let c=0;for(;c<n.length;){const[s,a=0,o=0]=n.slice(c,c+=3),i=(s<<16)+(a<<8)+o,p=i>>18,h=i>>12&63,d=i>>6&63,F=i&63;e.push(u[p],u[h],u[d],u[F])}const r=n.length%3;return e.join("").slice(0,1+e.length-r)+(r===2?"==":r===1?"=":"")},dt=/[^A-Za-z0-9+/]/g,M=t=>t.replace(dt,""),g=t=>String.fromCharCode(+t),gt=t=>{const n=M(t).split(""),e=[];let c=0;for(;c<n.length;){const[r,s,a,o]=n.slice(c,c+=4).map(i=>u.indexOf(i));e.push(g(r<<2|s>>4)),a!==64&&e.push(g((s&15)<<4|a>>2)),o!==64&&e.push(g((a&3)<<6|o))}return e.join("").replaceAll("\0","")},mt={BASE2_CHARSET:b,BASE10_CHARSET:H,BASE16_CHARSET:I,BASE36_CHARSET:k,BASE62_CHARSET:R,BASE64_CHARSET:u,BASE64WEB_CHARSET:D,convert:ft,getCharset:S,secureBase64:M,textToBase64:ht,base64ToText:gt},N=2048,l=[],P=()=>{for(;l.length>1&&l.slice(1,l.length).join("").length>N;)l.shift()},St=()=>{if(!O.value)return"";P();const t=[...l].reverse().join(`
---
`);return t.length===0?"":`Here are your replies, from newest to oldest:
${t}`.substring(0,N)},wt=(...t)=>{l.push(...t),P()},Tt=()=>{l.splice(0,l.length)},At=["OFF","BASIC","ADVANCED"],Et="BASIC",m=f(Et),w=f([]),T=f([]),A={add:wt,get:St,clear:Tt},xt=f(""),Ct=()=>{document.querySelector(".InputBox textarea").focus()},z=()=>new Promise((t,n)=>{$fetch("/api/token/check",{method:"POST"}).then(e=>{const{list:c,named:r}=e;T.value=c.sort().map(s=>({id:s,name:r[s]})),t(!0)}).catch(e=>{v.error("Initialization Failed"),n(e)})}),_t=t=>new Promise((n,e)=>{const c=mt.convert(t,"64w",10);if(xt.value=c,t==null)return A.clear(),n(!0);$fetch("/api/history",{method:"POST",body:{id:t}}).then(r=>{const s=r;s.length===0&&st("/c/");const a=[];A.add(...s.map(o=>{const{Q:i,A:p,t:h}=o,d=new Date(h);return a.push({type:"Q",text:i,t:d},{type:"A",text:p,t:d}),p})),w.value.unshift(...a),n(!0)}).catch(r=>{v.error("There was an error loading the conversation."),e(r)})}),C=(t,n=!1)=>{if(!n){const e=nt.service();Promise.all([t===null?null:z(),_t(t)]).finally(()=>{lt(),e!==null&&setTimeout(()=>{e.close()},500)})}},Bt="_t05",_=f(Bt),O=f(!0);function Ht(){const t=Y(),n=t.get(x);At.includes(n)&&(m.value=n),E(m,o=>{typeof o=="string"&&t.set(x,o,{path:"/"})}),E(_,o=>{t.set(ut,o,{path:"/"})});const e=tt(),c=()=>{var o,i;return(i=(o=e._route)==null?void 0:o.params)==null?void 0:i.conv},r=()=>{const o=c();return T.value.filter(i=>i.id===o)[0].name||""},s=et("openDrawer",()=>!1);return{conversations:T,messages:w,context:A,webBrowsingMode:m,temperatureSuffix:_,contextMode:O,getCurrentConvId:c,getCurrentConvName:r,checkTokenAndGetConversations:z,initPage:C,goToChat:(o,i=!1,p=!1)=>{const h=c();(i||h!==o||o===null)&&(w.value=[],C(o,p)),s.value=!1,Ct()}}}export{bt as E,lt as a,mt as b,y as s,Ht as u};
