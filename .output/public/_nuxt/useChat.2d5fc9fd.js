import{b as W,aQ as Q,j as B,l as U,m as $,o as G,c as j,y as q,a6 as K,v as X,u as V,z as Z,H as J,K as Y,r as p,L as tt,w as E,az as et,ay as b,bl as nt,bm as st}from"./entry.ae0f751e.js";import{a as ot}from"./el-button.42ddaacd.js";const rt=W({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Q,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),ct=B({name:"ElText"}),at=B({...ct,props:rt,setup(t){const n=t,e=ot(),c=U("text"),s=$(()=>[c.b(),c.m(n.type),c.m(e.value),c.is("truncated",n.truncated)]);return(r,i)=>(G(),j(Z(r.tag),{class:X(V(s))},{default:q(()=>[K(r.$slots,"default")]),_:3},8,["class"]))}});var it=J(at,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const bt=Y(it);function lt(){setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)})}const C="web-browsing",_="temperature-suffix",k=t=>(t==null?void 0:t.toString)===void 0?"":t.toString(),ut=t=>k(t).toLowerCase(),H="01",I="0123456789",R="0123456789abcdef",z="0123456789abcdefghijklmnopqrstuvwxyz",M="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",w=t=>{switch(typeof t!="string"&&(t=ut(t)),t){case"2":return H;case"10":return I;case"16":return R;case"36":return z;case"62":return M;case"64":return u;case"64w":case"64+":return F;default:return t}},pt=(t,n,e,c=0)=>{typeof t!="string"&&(t=k(t));let s=0;if(+n==10)s=+Number(t);else if(+n<37)s=parseInt(t,+n);else{n=w(n);const i=n.length;for(let o=0;o<t.length;o++)s+=n.indexOf(t[o])*Math.pow(i,t.length-1-o)}let r="";if(+e<37&&(r=s.toString(+e),c<=1))return r;if(e=w(e),r===""){const i=e.length;for(;s>0;)r=e.charAt(s%i)+r,s=Math.floor(s/i)}return(r===""?e.charAt(0):r).padStart(c,e[0])},ft=t=>{const n=t.split("").map(r=>r.charCodeAt(0)),e=[];let c=0;for(;c<n.length;){const[r,i=0,o=0]=n.slice(c,c+=3),a=(r<<16)+(i<<8)+o,f=a>>18,h=a>>12&63,d=a>>6&63,L=a&63;e.push(u[f],u[h],u[d],u[L])}const s=n.length%3;return e.join("").slice(0,1+e.length-s)+(s===2?"==":s===1?"=":"")},ht=/[^A-Za-z0-9+/]/g,N=t=>t.replace(ht,""),m=t=>String.fromCharCode(+t),dt=t=>{const n=N(t).split(""),e=[];let c=0;for(;c<n.length;){const[s,r,i,o]=n.slice(c,c+=4).map(a=>u.indexOf(a));e.push(m(s<<2|r>>4)),i!==64&&e.push(m((r&15)<<4|i>>2)),o!==64&&e.push(m((i&3)<<6|o))}return e.join("").replaceAll("\0","")},gt={BASE2_CHARSET:H,BASE10_CHARSET:I,BASE16_CHARSET:R,BASE36_CHARSET:z,BASE62_CHARSET:M,BASE64_CHARSET:u,BASE64WEB_CHARSET:F,convert:pt,getCharset:w,secureBase64:N,textToBase64:ft,base64ToText:dt},mt=2048,l=[],O=()=>{for(;l.length>1&&l.slice(1,l.length).join("").length>mt;)l.shift()},St=()=>{if(!D.value)return"";O();const t=l.join(`
---
`);return t.length===0?"":`Conversation history
===
${t}`},Tt=(t="",n="",e=!0)=>{l.push(`Question: ${t}
Answer: ${n}`),e&&O()},wt=()=>{l.splice(0,l.length)},xt=["OFF","BASIC","ADVANCED"],At="OFF",S=p(At),x=p([]),A=p([]),g={add:Tt,get:St,clear:wt},Et=p(""),Ct=()=>{document.querySelector(".InputBox textarea").focus()},P=()=>new Promise((t,n)=>{$fetch("/api/token/check",{method:"POST"}).then(e=>{const{list:c,named:s}=e;A.value=c.sort().map(r=>({id:r,name:s[r]})),t(!0)}).catch(e=>{b.error("Initialization Failed"),n(e)})}),_t=t=>new Promise((n,e)=>{const c=gt.convert(t,"64w",10);if(Et.value=c,t==null)return g.clear(),n(!0);$fetch("/api/history",{method:"POST",body:{id:t}}).then(s=>{const r=s;r.length===0&&st("/c/");const i=[];for(const o of r){const{Q:a,A:f,t:h}=o,d=new Date(h);i.push({type:"Q",text:a,t:d},{type:"A",text:f,t:d}),g.add(a,f,!1)}x.value.unshift(...i),n(!0)}).catch(s=>{b.error("There was an error loading the conversation."),e(s)})}),v=(t,n=!1)=>{if(!n){g.clear();const e=nt.service();Promise.all([t===null?null:P(),_t(t)]).finally(()=>{lt(),e!==null&&setTimeout(()=>{e.close()},500)})}},vt="_t05",T=p(vt),D=p(!0),y=p(!0);function kt(){const t=tt(),n=t.get(C);xt.includes(n)&&(S.value=n);const e=t.get(_)||"";/_t(?:0[0-9]|10)/.test(e)&&(T.value=e),E(S,o=>{typeof o=="string"&&t.set(C,o,{path:"/"})}),E(T,o=>{t.set(_,o,{path:"/"})});const c=et(),s=()=>{var o,a;return(a=(o=c._route)==null?void 0:o.params)==null?void 0:a.conv};return{conversations:A,messages:x,context:g,webBrowsingMode:S,temperatureSuffix:T,contextMode:D,openSidebar:y,getCurrentConvId:s,getCurrentConvName:()=>{const o=s();return A.value.filter(a=>a.id===o)[0].name||""},checkTokenAndGetConversations:P,initPage:v,goToChat:(o,a=!1,f=!1)=>{const h=s();(a||h!==o||o===null)&&(x.value=[],v(o,f)),y.value=!1,Ct()}}}export{bt as E,lt as a,gt as b,k as s,kt as u};
