import{b as G,aS as Q,j as P,l as j,m as K,o as X,c as V,y as Z,P as J,v as Y,u as ee,z as te,H as ne,K as se,r as u,bN as oe,w as g,aB as re,aA as H,br as ce,bs as ae}from"./entry.297e93ab.js";import{a as ie}from"./el-button.8ab82e1d.js";const ue=G({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Q,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),le=P({name:"ElText"}),fe=P({...le,props:ue,setup(e){const s=e,t=ie(),c=j("text"),o=K(()=>[c.b(),c.m(s.type),c.m(t.value),c.is("truncated",s.truncated)]);return(r,i)=>(X(),V(te(r.tag),{class:Y(ee(o))},{default:Z(()=>[J(r.$slots,"default")]),_:3},8,["class"]))}});var pe=ne(fe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const He=se(pe);async function he(){return await new Promise((e,s)=>{setTimeout(()=>{try{window.scrollTo(0,document.body.scrollHeight),e(null)}catch(t){s(t)}})})}const de={get isMobileScreen(){return window.innerWidth<600},get isTouchScreen(){return"ontouchstart"in document||navigator.maxTouchPoints>0}};function b(){return de}const M="web-browsing",k="temperature-suffix",R=e=>(e==null?void 0:e.toString)===void 0?"":e.toString(),ge=e=>R(e).toLowerCase(),D="01",z="0123456789",F="0123456789abcdef",N="0123456789abcdefghijklmnopqrstuvwxyz",O="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",C=e=>{switch(typeof e!="string"&&(e=ge(e)),e){case"2":return D;case"10":return z;case"16":return F;case"36":return N;case"62":return O;case"64":return p;case"64w":case"64+":return W;default:return e}},me=(e,s,t,c=0)=>{typeof e!="string"&&(e=R(e));let o=0;if(+s==10)o=+Number(e);else if(+s<37)o=parseInt(e,+s);else{s=C(s);const i=s.length;for(let n=0;n<e.length;n++)o+=s.indexOf(e[n])*Math.pow(i,e.length-1-n)}let r="";if(+t<37&&(r=o.toString(+t),c<=1))return r;if(t=C(t),r===""){const i=t.length;for(;o>0;)r=t.charAt(o%i)+r,o=Math.floor(o/i)}return(r===""?t.charAt(0):r).padStart(c,t[0])},Se=e=>{const s=e.split("").map(r=>r.charCodeAt(0)),t=[];let c=0;for(;c<s.length;){const[r,i=0,n=0]=s.slice(c,c+=3),a=(r<<16)+(i<<8)+n,h=a>>18,d=a>>12&63,T=a>>6&63,v=a&63;t.push(p[h],p[d],p[T],p[v])}const o=s.length%3;return t.join("").slice(0,1+t.length-o)+(o===2?"==":o===1?"=":"")},we=/[^A-Za-z0-9+/]/g,L=e=>e.replace(we,""),x=e=>String.fromCharCode(+e),Te=e=>{const s=L(e).split(""),t=[];let c=0;for(;c<s.length;){const[o,r,i,n]=s.slice(c,c+=4).map(a=>p.indexOf(a));t.push(x(o<<2|r>>4)),i!==64&&t.push(x((r&15)<<4|i>>2)),n!==64&&t.push(x((i&3)<<6|n))}return t.join("").replaceAll("\0","")},ve={BASE2_CHARSET:D,BASE10_CHARSET:z,BASE16_CHARSET:F,BASE36_CHARSET:N,BASE62_CHARSET:O,BASE64_CHARSET:p,BASE64WEB_CHARSET:W,convert:me,getCharset:C,secureBase64:L,textToBase64:Se,base64ToText:Te},xe=2048,l=[],U=()=>{for(;l.length>1&&l.slice(1,l.length).join("").length>xe;)l.shift()},Ae=()=>{if(!q.value)return"";U();const e=l.join(`
---
`);return e.length===0?"":`Conversation history
===
${e}`},Ee=(e="",s="",t=!0)=>{l.push(`Question: ${e}
Answer: ${s}`),t&&U()},Ce=()=>{l.splice(0,l.length)},_e=["OFF","BASIC","ADVANCED"],ye="OFF",A=u(ye),_=u([]),y=u([]),w={add:Ee,get:Ae,clear:Ce},Be=u(""),be=()=>{document.querySelector(".InputBox textarea").focus()},$=()=>new Promise((e,s)=>{$fetch("/api/token/check",{method:"POST"}).then(t=>{const{list:c,named:o}=t;y.value=c.sort().map(r=>({id:r,name:o[r]})),e(!0)}).catch(t=>{H.error("Initialization Failed"),s(t)})}),Me=e=>new Promise((s,t)=>{const c=ve.convert(e,"64w",10);if(Be.value=c,e==null)return w.clear(),s(!0);$fetch("/api/history",{method:"POST",body:{id:e}}).then(o=>{const r=o;r.length===0&&ae("/c/");const i=[];for(const n of r){const{Q:a,A:h,urls:d,queries:T,t:v}=n,B=new Date(v);i.push({type:"Q",text:a,t:B},{type:"A",text:h,urls:d,queries:T,t:B}),w.add(a,h,!1)}_.value.unshift(...i),s(!0)}).catch(o=>{H.error("There was an error loading the conversation."),t(o)})}),I=(e,s=!1)=>{if(!s){w.clear();const t=ce.service();Promise.all([e===null?null:$(),Me(e)]).finally(()=>{he(),t!==null&&setTimeout(()=>{t.close()},500)})}},ke="_t05",E=u(ke),q=u(!0),f=u(!1),m=u(f.value),S=u(f.value);function Re(){const e=oe(),s=e.get(M);_e.includes(s)&&(A.value=s);const t=e.get(k)||"";/_t(?:0[0-9]|10)/.test(t)&&(E.value=t),g(A,n=>{typeof n=="string"&&e.set(M,n,{path:"/"})}),g(E,n=>{e.set(k,n,{path:"/"})});const c=re(),o=()=>{var n,a;return(a=(n=c._route)==null?void 0:n.params)==null?void 0:a.conv},r=()=>{const n=o();return y.value.filter(a=>a.id===n)[0].name||""};return g(f,n=>{b().isMobileScreen?(m.value=!1,S.value!==n&&(S.value=n)):(S.value=!1,m.value!==n&&(m.value=n))}),g(S,n=>{f.value=n}),g(m,n=>{f.value=n}),{conversations:y,messages:_,context:w,webBrowsingMode:A,temperatureSuffix:E,contextMode:q,openMenu:f,openSidebar:m,openDrawer:S,getCurrentConvId:o,getCurrentConvName:r,checkTokenAndGetConversations:$,initPage:I,goToChat:(n,a=!1,h=!1)=>{const d=o();(a||d!==n||n===null)&&(_.value=[],I(n,h)),b().isMobileScreen&&(f.value=!1),be()}}}export{He as E,he as a,ve as b,b as c,R as s,Re as u};
